<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIXO - OkamÅ¾itÃ© opravy domÃ¡cÃ­ch zÃ¡vad</title>

    <!-- SEO Meta Tags -->
    <meta name="description" content="FIXO aplikace - AI analÃ½za fotografiÃ­ domÃ¡cÃ­ch zÃ¡vad s nÃ¡vody na opravu krok za krokem.">
    <meta name="theme-color" content="#2563eb">

    <!-- Preconnect for faster CDN loading -->
    <link rel="preconnect" href="https://unpkg.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="dns-prefetch" href="https://unpkg.com">
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">

    <!-- React & Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="public/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
    <style>
        /* App-specific overrides */
        .app-bg {
            background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-secondary-light) 100%);
            min-height: 100vh;
        }
        .upload-card {
            background: var(--color-bg-primary);
            border-radius: var(--radius-2xl);
            box-shadow: var(--shadow-xl);
            padding: var(--space-8);
        }
        .quick-stat {
            background: var(--color-bg-tertiary);
            border-radius: var(--radius-lg);
            padding: var(--space-3);
            text-align: center;
        }
        .example-card {
            background: var(--color-bg-primary);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
            cursor: pointer;
            transition: all var(--transition-normal);
        }
        .example-card:hover {
            box-shadow: var(--shadow-lg);
        }
        .result-header {
            background: var(--gradient-primary);
            color: var(--color-text-inverse);
            padding: var(--space-6);
        }
        .info-box {
            background: var(--color-bg-tertiary);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            text-align: center;
        }
        .step-box {
            background: linear-gradient(135deg, var(--color-primary-light) 0%, var(--color-secondary-light) 100%);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            text-align: center;
        }
        .step-item {
            display: flex;
            align-items: center;
            padding: var(--space-3);
            border-radius: var(--radius-lg);
        }
        .step-item-active {
            background: var(--color-primary-light);
            border-left: 4px solid var(--color-primary);
        }
        .step-item-completed {
            background: var(--color-success-light);
            opacity: 0.75;
        }
        .step-item-pending {
            background: var(--color-bg-tertiary);
        }
        .knowledge-card {
            background: var(--color-bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            transition: all var(--transition-normal);
        }
        .knowledge-card:hover {
            box-shadow: var(--shadow-xl);
        }
        .knowledge-card-header {
            background: var(--gradient-primary);
            color: var(--color-text-inverse);
            padding: var(--space-4);
        }
        .issue-item {
            border-left: 4px solid var(--color-primary);
            padding-left: var(--space-3);
        }
        /* Drag & Drop styles */
        .drop-zone {
            border: 3px dashed var(--color-border);
            border-radius: var(--radius-xl);
            padding: var(--space-8);
            text-align: center;
            transition: all var(--transition-normal);
            cursor: pointer;
            margin-bottom: var(--space-4);
        }
        .drop-zone:hover {
            border-color: var(--color-primary);
            background-color: var(--color-primary-light);
        }
        .drop-zone.drag-over {
            border-color: var(--color-primary);
            background-color: var(--color-primary-light);
            transform: scale(1.02);
        }
        .drop-zone-icon {
            font-size: var(--text-5xl);
            color: var(--color-primary);
            margin-bottom: var(--space-4);
        }
        .category-filter {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
            justify-content: center;
            margin-bottom: var(--space-6);
        }
        .category-btn {
            padding: var(--space-2) var(--space-4);
            border-radius: var(--radius-full);
            border: 2px solid var(--color-border);
            background: var(--color-bg-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
            font-size: var(--text-sm);
        }
        .category-btn:hover {
            border-color: var(--color-primary);
        }
        .category-btn.active {
            background: var(--color-primary);
            color: var(--color-text-inverse);
            border-color: var(--color-primary);
        }
        /* Language Selector */
        .language-selector {
            position: relative;
            display: inline-block;
        }
        .language-btn {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            background: var(--color-bg-secondary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            cursor: pointer;
            font-size: var(--text-sm);
            transition: all var(--transition-fast);
        }
        .language-btn:hover {
            background: var(--color-bg-tertiary);
        }
        .language-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: var(--space-1);
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            min-width: 200px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
        }
        .language-dropdown-hidden {
            display: none;
        }
        .language-option {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            cursor: pointer;
            transition: background var(--transition-fast);
        }
        .language-option:hover {
            background: var(--color-bg-secondary);
        }
        .language-option.active {
            background: var(--color-primary-light);
            color: var(--color-primary);
        }
        .language-flag {
            font-size: var(--text-lg);
        }
        .translating-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
        }
        .translating-box {
            background: var(--color-bg-primary);
            padding: var(--space-8);
            border-radius: var(--radius-xl);
            text-align: center;
            box-shadow: var(--shadow-xl);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Seznam podporovanÃ½ch jazykÅ¯ (50+ svÄ›tovÃ½ch jazykÅ¯)
        const languages = [
            { code: 'cs', name: 'ÄŒeÅ¡tina', flag: 'ğŸ‡¨ğŸ‡¿', native: 'ÄŒeÅ¡tina' },
            { code: 'en', name: 'English', flag: 'ğŸ‡¬ğŸ‡§', native: 'English' },
            { code: 'de', name: 'NÄ›mÄina', flag: 'ğŸ‡©ğŸ‡ª', native: 'Deutsch' },
            { code: 'es', name: 'Å panÄ›lÅ¡tina', flag: 'ğŸ‡ªğŸ‡¸', native: 'EspaÃ±ol' },
            { code: 'fr', name: 'FrancouzÅ¡tina', flag: 'ğŸ‡«ğŸ‡·', native: 'FranÃ§ais' },
            { code: 'it', name: 'ItalÅ¡tina', flag: 'ğŸ‡®ğŸ‡¹', native: 'Italiano' },
            { code: 'pt', name: 'PortugalÅ¡tina', flag: 'ğŸ‡µğŸ‡¹', native: 'PortuguÃªs' },
            { code: 'pl', name: 'PolÅ¡tina', flag: 'ğŸ‡µğŸ‡±', native: 'Polski' },
            { code: 'ru', name: 'RuÅ¡tina', flag: 'ğŸ‡·ğŸ‡º', native: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹' },
            { code: 'uk', name: 'UkrajinÅ¡tina', flag: 'ğŸ‡ºğŸ‡¦', native: 'Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°' },
            { code: 'sk', name: 'SlovenÅ¡tina', flag: 'ğŸ‡¸ğŸ‡°', native: 'SlovenÄina' },
            { code: 'nl', name: 'HolandÅ¡tina', flag: 'ğŸ‡³ğŸ‡±', native: 'Nederlands' },
            { code: 'sv', name: 'Å vÃ©dÅ¡tina', flag: 'ğŸ‡¸ğŸ‡ª', native: 'Svenska' },
            { code: 'da', name: 'DÃ¡nÅ¡tina', flag: 'ğŸ‡©ğŸ‡°', native: 'Dansk' },
            { code: 'no', name: 'NorÅ¡tina', flag: 'ğŸ‡³ğŸ‡´', native: 'Norsk' },
            { code: 'fi', name: 'FinÅ¡tina', flag: 'ğŸ‡«ğŸ‡®', native: 'Suomi' },
            { code: 'el', name: 'Å˜eÄtina', flag: 'ğŸ‡¬ğŸ‡·', native: 'Î•Î»Î»Î·Î½Î¹ÎºÎ¬' },
            { code: 'tr', name: 'TureÄtina', flag: 'ğŸ‡¹ğŸ‡·', native: 'TÃ¼rkÃ§e' },
            { code: 'hu', name: 'MaÄarÅ¡tina', flag: 'ğŸ‡­ğŸ‡º', native: 'Magyar' },
            { code: 'ro', name: 'RumunÅ¡tina', flag: 'ğŸ‡·ğŸ‡´', native: 'RomÃ¢nÄƒ' },
            { code: 'bg', name: 'BulharÅ¡tina', flag: 'ğŸ‡§ğŸ‡¬', native: 'Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸' },
            { code: 'hr', name: 'ChorvatÅ¡tina', flag: 'ğŸ‡­ğŸ‡·', native: 'Hrvatski' },
            { code: 'sr', name: 'SrbÅ¡tina', flag: 'ğŸ‡·ğŸ‡¸', native: 'Ğ¡Ñ€Ğ¿ÑĞºĞ¸' },
            { code: 'sl', name: 'SlovinÅ¡tina', flag: 'ğŸ‡¸ğŸ‡®', native: 'SlovenÅ¡Äina' },
            { code: 'zh', name: 'ÄŒÃ­nÅ¡tina', flag: 'ğŸ‡¨ğŸ‡³', native: 'ä¸­æ–‡' },
            { code: 'ja', name: 'JaponÅ¡tina', flag: 'ğŸ‡¯ğŸ‡µ', native: 'æ—¥æœ¬èª' },
            { code: 'ko', name: 'KorejÅ¡tina', flag: 'ğŸ‡°ğŸ‡·', native: 'í•œêµ­ì–´' },
            { code: 'ar', name: 'ArabÅ¡tina', flag: 'ğŸ‡¸ğŸ‡¦', native: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©' },
            { code: 'he', name: 'HebrejÅ¡tina', flag: 'ğŸ‡®ğŸ‡±', native: '×¢×‘×¨×™×ª' },
            { code: 'hi', name: 'HindÅ¡tina', flag: 'ğŸ‡®ğŸ‡³', native: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€' },
            { code: 'th', name: 'ThajÅ¡tina', flag: 'ğŸ‡¹ğŸ‡­', native: 'à¹„à¸—à¸¢' },
            { code: 'vi', name: 'VietnamÅ¡tina', flag: 'ğŸ‡»ğŸ‡³', native: 'Tiáº¿ng Viá»‡t' },
            { code: 'id', name: 'IndonÃ©Å¡tina', flag: 'ğŸ‡®ğŸ‡©', native: 'Bahasa Indonesia' },
            { code: 'ms', name: 'MalajÅ¡tina', flag: 'ğŸ‡²ğŸ‡¾', native: 'Bahasa Melayu' },
            { code: 'tl', name: 'FilipÃ­nÅ¡tina', flag: 'ğŸ‡µğŸ‡­', native: 'Tagalog' },
            { code: 'bn', name: 'BengÃ¡lÅ¡tina', flag: 'ğŸ‡§ğŸ‡©', native: 'à¦¬à¦¾à¦‚à¦²à¦¾' },
            { code: 'ta', name: 'TamilÅ¡tina', flag: 'ğŸ‡±ğŸ‡°', native: 'à®¤à®®à®¿à®´à¯' },
            { code: 'fa', name: 'PerÅ¡tina', flag: 'ğŸ‡®ğŸ‡·', native: 'ÙØ§Ø±Ø³ÛŒ' },
            { code: 'ur', name: 'UrdÅ¡tina', flag: 'ğŸ‡µğŸ‡°', native: 'Ø§Ø±Ø¯Ùˆ' },
            { code: 'sw', name: 'SvahilÅ¡tina', flag: 'ğŸ‡°ğŸ‡ª', native: 'Kiswahili' },
            { code: 'af', name: 'AfrikÃ¡nÅ¡tina', flag: 'ğŸ‡¿ğŸ‡¦', native: 'Afrikaans' },
            { code: 'et', name: 'EstonÅ¡tina', flag: 'ğŸ‡ªğŸ‡ª', native: 'Eesti' },
            { code: 'lv', name: 'LotyÅ¡tina', flag: 'ğŸ‡±ğŸ‡»', native: 'LatvieÅ¡u' },
            { code: 'lt', name: 'LitevÅ¡tina', flag: 'ğŸ‡±ğŸ‡¹', native: 'LietuviÅ³' },
            { code: 'is', name: 'IslandÅ¡tina', flag: 'ğŸ‡®ğŸ‡¸', native: 'Ãslenska' },
            { code: 'ga', name: 'IrÅ¡tina', flag: 'ğŸ‡®ğŸ‡ª', native: 'Gaeilge' },
            { code: 'cy', name: 'VelÅ¡tina', flag: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿', native: 'Cymraeg' },
            { code: 'ca', name: 'KatalÃ¡nÅ¡tina', flag: 'ğŸ‡ªğŸ‡¸', native: 'CatalÃ ' },
            { code: 'eu', name: 'BaskiÄtina', flag: 'ğŸ‡ªğŸ‡¸', native: 'Euskara' }
        ];

        // OriginÃ¡lnÃ­ ÄeskÃ© texty UI (klÃ­Äe pro pÅ™eklad)
        const originalTexts = {
            // Header
            appName: 'FIXO',
            appSlogan: 'OkamÅ¾itÃ© opravy domÃ¡cÃ­ch zÃ¡vad',
            navAnalyze: 'Analyzovat',
            navHistory: 'Historie',
            navDatabase: 'DatabÃ¡ze',

            // Home view
            homeTitle: 'Vyfotografujte zÃ¡vadu',
            homeSubtitle: 'AI okamÅ¾itÄ› identifikuje problÃ©m a nabÃ­dne Å™eÅ¡enÃ­',
            dropzoneText: 'PÅ™etÃ¡hnÄ›te fotografii sem',
            dropzoneHint: 'nebo kliknÄ›te pro vÃ½bÄ›r souboru',
            dropzoneFormats: 'PodporovanÃ© formÃ¡ty: JPG, PNG, GIF, WebP',
            dropzoneDrop: 'PusÅ¥te pro nahrÃ¡nÃ­',
            uploadBtn: 'Vybrat fotografii',
            stat30sec: '30 sekund',
            statSafe: 'BezpeÄnÃ©',
            stat500repairs: '500+ oprav',

            // Analyzing
            analyzingTitle: 'Analyzuji fotografii...',
            analyzingStep1: 'Detekce objektu',
            analyzingStep2: 'Identifikace zÃ¡vady',
            analyzingStep3: 'PÅ™Ã­prava nÃ¡vodÅ¯',

            // Results
            detectedWith: 'DetekovÃ¡no s',
            confidence: 'jistotou',
            identifiedProblem: 'IdentifikovanÃ½ problÃ©m',
            repairTime: 'ÄŒas opravy',
            difficulty: 'ObtÃ­Å¾nost',
            risk: 'Riziko',
            safetyWarning: 'BezpeÄnostnÃ­ upozornÄ›nÃ­',
            startRepair: 'ZaÄÃ­t opravu',
            callExpert: 'Zavolat odbornÃ­ka',

            // Repair
            step: 'Krok',
            of: 'z',
            toolsNeeded: 'PotÅ™ebnÃ© nÃ¡stroje a materiÃ¡l',
            timeRequired: 'ÄŒasovÃ¡ nÃ¡roÄnost',
            allStepsOverview: 'PÅ™ehled vÅ¡ech krokÅ¯',
            prevStep: 'PÅ™edchozÃ­ krok',
            nextStep: 'DalÅ¡Ã­ krok',
            completeRepair: 'DokonÄit opravu',

            // History
            historyTitle: 'Historie oprav',
            noRepairsYet: 'ZatÃ­m nemÃ¡te Å¾Ã¡dnÃ© opravy',
            noRepairsHint: 'Nahrajte fotografii a zaÄnÄ›te s prvnÃ­ opravou',
            completed: 'DokonÄeno',
            inProgress: 'ProbÃ­hÃ¡',
            filterAll: 'VÅ¡e',
            filterCompleted: 'DokonÄenÃ©',
            filterInProgress: 'ProbÃ­hajÃ­cÃ­',
            exportCSV: 'Export CSV',
            repairDetails: 'Detail opravy',
            totalRepairs: 'Celkem oprav',
            completedRepairs: 'DokonÄenÃ½ch',
            avgTime: 'PrÅ¯mÄ›rnÃ½ Äas',
            close: 'ZavÅ™Ã­t',
            tools: 'NÃ¡stroje',
            steps: 'Kroky',
            warnings: 'UpozornÄ›nÃ­',

            // Database
            databaseTitle: 'DatabÃ¡ze zÃ¡vad a oprav',
            showing: 'Zobrazeno',
            outOf: 'z',
            items: 'poloÅ¾ek',
            noCategoryItems: 'Å½Ã¡dnÃ© poloÅ¾ky v tÃ©to kategorii',
            tryCategoryHint: 'Zkuste vybrat jinou kategorii',
            aboutDatabase: 'O databÃ¡zi',
            databaseInfo: 'NaÅ¡e databÃ¡ze obsahuje vÃ­ce neÅ¾ 500 nejÄastÄ›jÅ¡Ã­ch domÃ¡cÃ­ch zÃ¡vad rozdÄ›lenÃ½ch do 12 kategoriÃ­. KaÅ¾dÃ¡ oprava obsahuje detailnÃ­ nÃ¡vod, seznam potÅ™ebnÃ½ch nÃ¡strojÅ¯ a bezpeÄnostnÃ­ upozornÄ›nÃ­.',

            // Categories
            catAll: 'VÅ¡e',
            catWater: 'Voda',
            catElectric: 'ElektÅ™ina',
            catHeating: 'TopenÃ­',
            catDoors: 'DveÅ™e & Okna',
            catFurniture: 'NÃ¡bytek',
            catAppliances: 'SpotÅ™ebiÄe',
            catKitchen: 'KuchyÅˆ',
            catBathroom: 'Koupelna',
            catWalls: 'StÄ›ny',
            catGarden: 'Zahrada',

            // Footer
            footerSlogan: 'PrvnÃ­ svÄ›tovÃ½ standard pro vizuÃ¡lnÃ­ diagnostiku domÃ¡cÃ­ch zÃ¡vad.',
            footerFeatures: 'Funkce',
            footerAI: 'AI analÃ½za fotografiÃ­',
            footer500guides: '500+ nÃ¡vodÅ¯ na opravy',
            footerSafety: 'BezpeÄnostnÃ­ upozornÄ›nÃ­',
            footerHistory: 'Historie oprav',
            footerContact: 'Kontakt',
            footerQuote: 'Fix Anything. Anywhere. Instantly.',
            footerCopyright: 'Â© 2025 FIXO. VÅ¡echna prÃ¡va vyhrazena.',

            // Language
            translating: 'PÅ™eklÃ¡dÃ¡m...',
            selectLanguage: 'Vybrat jazyk'
        };

        // PÅ™edgenerovanÃ© pÅ™eklady pro GitHub Pages (fungujÃ­ offline bez backendu)
        const prebuiltTranslations = {
            en: {
                appName: 'FIXO',
                appSlogan: 'Instant home repair solutions',
                navAnalyze: 'Analyze',
                navHistory: 'History',
                navDatabase: 'Database',
                homeTitle: 'Photograph the problem',
                homeSubtitle: 'AI instantly identifies the issue and offers solutions',
                dropzoneText: 'Drag photo here',
                dropzoneHint: 'or click to select file',
                dropzoneFormats: 'Supported formats: JPG, PNG, GIF, WebP',
                dropzoneDrop: 'Drop to upload',
                uploadBtn: 'Select photo',
                stat30sec: '30 seconds',
                statSafe: 'Safe',
                stat500repairs: '500+ repairs',
                analyzingTitle: 'Analyzing photo...',
                analyzingStep1: 'Object detection',
                analyzingStep2: 'Issue identification',
                analyzingStep3: 'Preparing guides',
                detectedWith: 'Detected with',
                confidence: 'confidence',
                identifiedProblem: 'Identified problem',
                repairTime: 'Repair time',
                difficulty: 'Difficulty',
                risk: 'Risk',
                safetyWarning: 'Safety warning',
                startRepair: 'Start repair',
                callExpert: 'Call expert',
                step: 'Step',
                of: 'of',
                toolsNeeded: 'Required tools and materials',
                timeRequired: 'Time required',
                allStepsOverview: 'All steps overview',
                prevStep: 'Previous step',
                nextStep: 'Next step',
                completeRepair: 'Complete repair',
                historyTitle: 'Repair history',
                noRepairsYet: 'No repairs yet',
                noRepairsHint: 'Upload a photo and start your first repair',
                completed: 'Completed',
                inProgress: 'In progress',
                filterAll: 'All',
                filterCompleted: 'Completed',
                filterInProgress: 'In progress',
                exportCSV: 'Export CSV',
                repairDetails: 'Repair details',
                totalRepairs: 'Total repairs',
                completedRepairs: 'Completed',
                avgTime: 'Average time',
                close: 'Close',
                tools: 'Tools',
                steps: 'Steps',
                warnings: 'Warnings',
                databaseTitle: 'Repair database',
                showing: 'Showing',
                outOf: 'of',
                items: 'items',
                noCategoryItems: 'No items in this category',
                tryCategoryHint: 'Try selecting another category',
                aboutDatabase: 'About database',
                databaseInfo: 'Our database contains over 500 most common home repairs divided into 12 categories. Each repair includes detailed guide, list of required tools and safety warnings.',
                catAll: 'All',
                catWater: 'Water',
                catElectric: 'Electrical',
                catHeating: 'Heating',
                catDoors: 'Doors & Windows',
                catFurniture: 'Furniture',
                catAppliances: 'Appliances',
                catKitchen: 'Kitchen',
                catBathroom: 'Bathroom',
                catWalls: 'Walls',
                catGarden: 'Garden',
                footerSlogan: 'The first global standard for visual home repair diagnostics.',
                footerFeatures: 'Features',
                footerAI: 'AI photo analysis',
                footer500guides: '500+ repair guides',
                footerSafety: 'Safety warnings',
                footerHistory: 'Repair history',
                footerContact: 'Contact',
                footerQuote: 'Fix Anything. Anywhere. Instantly.',
                footerCopyright: 'Â© 2025 FIXO. All rights reserved.',
                translating: 'Translating...',
                selectLanguage: 'Select language'
            },
            de: {
                appName: 'FIXO',
                appSlogan: 'Sofortige ReparaturlÃ¶sungen fÃ¼r Zuhause',
                navAnalyze: 'Analysieren',
                navHistory: 'Verlauf',
                navDatabase: 'Datenbank',
                homeTitle: 'Fotografieren Sie das Problem',
                homeSubtitle: 'KI identifiziert sofort das Problem und bietet LÃ¶sungen',
                dropzoneText: 'Foto hierher ziehen',
                dropzoneHint: 'oder klicken um Datei auszuwÃ¤hlen',
                dropzoneFormats: 'UnterstÃ¼tzte Formate: JPG, PNG, GIF, WebP',
                dropzoneDrop: 'Zum Hochladen loslassen',
                uploadBtn: 'Foto auswÃ¤hlen',
                stat30sec: '30 Sekunden',
                statSafe: 'Sicher',
                stat500repairs: '500+ Reparaturen',
                analyzingTitle: 'Foto wird analysiert...',
                analyzingStep1: 'Objekterkennung',
                analyzingStep2: 'Problemidentifikation',
                analyzingStep3: 'Anleitungen werden vorbereitet',
                detectedWith: 'Erkannt mit',
                confidence: 'Sicherheit',
                identifiedProblem: 'Identifiziertes Problem',
                repairTime: 'Reparaturzeit',
                difficulty: 'Schwierigkeit',
                risk: 'Risiko',
                safetyWarning: 'Sicherheitshinweis',
                startRepair: 'Reparatur starten',
                callExpert: 'Experten anrufen',
                step: 'Schritt',
                of: 'von',
                toolsNeeded: 'BenÃ¶tigte Werkzeuge und Materialien',
                timeRequired: 'Zeitaufwand',
                allStepsOverview: 'Ãœbersicht aller Schritte',
                prevStep: 'Vorheriger Schritt',
                nextStep: 'NÃ¤chster Schritt',
                completeRepair: 'Reparatur abschlieÃŸen',
                historyTitle: 'Reparaturverlauf',
                noRepairsYet: 'Noch keine Reparaturen',
                noRepairsHint: 'Laden Sie ein Foto hoch und starten Sie Ihre erste Reparatur',
                completed: 'Abgeschlossen',
                inProgress: 'In Bearbeitung',
                filterAll: 'Alle',
                filterCompleted: 'Abgeschlossen',
                filterInProgress: 'In Bearbeitung',
                exportCSV: 'CSV exportieren',
                repairDetails: 'Reparaturdetails',
                totalRepairs: 'Gesamtreparaturen',
                completedRepairs: 'Abgeschlossen',
                avgTime: 'Durchschnittszeit',
                close: 'SchlieÃŸen',
                tools: 'Werkzeuge',
                steps: 'Schritte',
                warnings: 'Warnungen',
                databaseTitle: 'Reparaturdatenbank',
                showing: 'Angezeigt',
                outOf: 'von',
                items: 'EintrÃ¤gen',
                noCategoryItems: 'Keine EintrÃ¤ge in dieser Kategorie',
                tryCategoryHint: 'Versuchen Sie eine andere Kategorie',
                aboutDatabase: 'Ãœber die Datenbank',
                databaseInfo: 'Unsere Datenbank enthÃ¤lt Ã¼ber 500 der hÃ¤ufigsten Haushaltsreparaturen in 12 Kategorien. Jede Reparatur enthÃ¤lt detaillierte Anleitungen, eine Liste der benÃ¶tigten Werkzeuge und Sicherheitshinweise.',
                catAll: 'Alle',
                catWater: 'Wasser',
                catElectric: 'Elektrik',
                catHeating: 'Heizung',
                catDoors: 'TÃ¼ren & Fenster',
                catFurniture: 'MÃ¶bel',
                catAppliances: 'GerÃ¤te',
                catKitchen: 'KÃ¼che',
                catBathroom: 'Badezimmer',
                catWalls: 'WÃ¤nde',
                catGarden: 'Garten',
                footerSlogan: 'Der erste globale Standard fÃ¼r visuelle Hausreparaturdiagnose.',
                footerFeatures: 'Funktionen',
                footerAI: 'KI-Fotoanalyse',
                footer500guides: '500+ Reparaturanleitungen',
                footerSafety: 'Sicherheitshinweise',
                footerHistory: 'Reparaturverlauf',
                footerContact: 'Kontakt',
                footerQuote: 'Fix Anything. Anywhere. Instantly.',
                footerCopyright: 'Â© 2025 FIXO. Alle Rechte vorbehalten.',
                translating: 'Ãœbersetzen...',
                selectLanguage: 'Sprache wÃ¤hlen'
            },
            sk: {
                appName: 'FIXO',
                appSlogan: 'OkamÅ¾itÃ© opravy domÃ¡cich porÃºch',
                navAnalyze: 'AnalyzovaÅ¥',
                navHistory: 'HistÃ³ria',
                navDatabase: 'DatabÃ¡za',
                homeTitle: 'Odfotografujte poruchu',
                homeSubtitle: 'AI okamÅ¾ite identifikuje problÃ©m a ponÃºkne rieÅ¡enie',
                dropzoneText: 'Pretiahnite fotografiu sem',
                dropzoneHint: 'alebo kliknite pre vÃ½ber sÃºboru',
                dropzoneFormats: 'PodporovanÃ© formÃ¡ty: JPG, PNG, GIF, WebP',
                dropzoneDrop: 'Pustite pre nahratie',
                uploadBtn: 'VybraÅ¥ fotografiu',
                stat30sec: '30 sekÃºnd',
                statSafe: 'BezpeÄnÃ©',
                stat500repairs: '500+ oprÃ¡v',
                analyzingTitle: 'Analyzujem fotografiu...',
                analyzingStep1: 'Detekcia objektu',
                analyzingStep2: 'IdentifikÃ¡cia poruchy',
                analyzingStep3: 'PrÃ­prava nÃ¡vodov',
                detectedWith: 'DetekovanÃ© s',
                confidence: 'istotou',
                identifiedProblem: 'IdentifikovanÃ½ problÃ©m',
                repairTime: 'ÄŒas opravy',
                difficulty: 'ObtiaÅ¾nosÅ¥',
                risk: 'Riziko',
                safetyWarning: 'BezpeÄnostnÃ© upozornenie',
                startRepair: 'ZaÄaÅ¥ opravu',
                callExpert: 'ZavolaÅ¥ odbornÃ­ka',
                step: 'Krok',
                of: 'z',
                toolsNeeded: 'PotrebnÃ© nÃ¡stroje a materiÃ¡l',
                timeRequired: 'ÄŒasovÃ¡ nÃ¡roÄnosÅ¥',
                allStepsOverview: 'PrehÄ¾ad vÅ¡etkÃ½ch krokov',
                prevStep: 'PredchÃ¡dzajÃºci krok',
                nextStep: 'ÄalÅ¡Ã­ krok',
                completeRepair: 'DokonÄiÅ¥ opravu',
                historyTitle: 'HistÃ³ria oprÃ¡v',
                noRepairsYet: 'ZatiaÄ¾ nemÃ¡te Å¾iadne opravy',
                noRepairsHint: 'Nahrajte fotografiu a zaÄnite s prvou opravou',
                completed: 'DokonÄenÃ©',
                inProgress: 'Prebieha',
                filterAll: 'VÅ¡etko',
                filterCompleted: 'DokonÄenÃ©',
                filterInProgress: 'PrebiehajÃºce',
                exportCSV: 'Export CSV',
                repairDetails: 'Detail opravy',
                totalRepairs: 'Celkom oprÃ¡v',
                completedRepairs: 'DokonÄenÃ½ch',
                avgTime: 'PriemernÃ½ Äas',
                close: 'ZavrieÅ¥',
                tools: 'NÃ¡stroje',
                steps: 'Kroky',
                warnings: 'Upozornenia',
                databaseTitle: 'DatabÃ¡za porÃºch a oprÃ¡v',
                showing: 'ZobrazenÃ©',
                outOf: 'z',
                items: 'poloÅ¾iek',
                noCategoryItems: 'Å½iadne poloÅ¾ky v tejto kategÃ³rii',
                tryCategoryHint: 'SkÃºste vybraÅ¥ inÃº kategÃ³riu',
                aboutDatabase: 'O databÃ¡ze',
                databaseInfo: 'NaÅ¡a databÃ¡za obsahuje viac ako 500 najÄastejÅ¡Ã­ch domÃ¡cich porÃºch rozdelenÃ½ch do 12 kategÃ³riÃ­. KaÅ¾dÃ¡ oprava obsahuje detailnÃ½ nÃ¡vod, zoznam potrebnÃ½ch nÃ¡strojov a bezpeÄnostnÃ© upozornenia.',
                catAll: 'VÅ¡etko',
                catWater: 'Voda',
                catElectric: 'Elektrina',
                catHeating: 'KÃºrenie',
                catDoors: 'Dvere & OknÃ¡',
                catFurniture: 'NÃ¡bytok',
                catAppliances: 'SpotrebiÄe',
                catKitchen: 'KuchyÅˆa',
                catBathroom: 'KÃºpeÄ¾Åˆa',
                catWalls: 'Steny',
                catGarden: 'ZÃ¡hrada',
                footerSlogan: 'PrvÃ½ svetovÃ½ Å¡tandard pre vizuÃ¡lnu diagnostiku domÃ¡cich porÃºch.',
                footerFeatures: 'Funkcie',
                footerAI: 'AI analÃ½za fotografiÃ­',
                footer500guides: '500+ nÃ¡vodov na opravy',
                footerSafety: 'BezpeÄnostnÃ© upozornenia',
                footerHistory: 'HistÃ³ria oprÃ¡v',
                footerContact: 'Kontakt',
                footerQuote: 'Fix Anything. Anywhere. Instantly.',
                footerCopyright: 'Â© 2025 FIXO. VÅ¡etky prÃ¡va vyhradenÃ©.',
                translating: 'PrekladÃ¡m...',
                selectLanguage: 'VybraÅ¥ jazyk'
            },
            pl: {
                appName: 'FIXO',
                appSlogan: 'Natychmiastowe naprawy domowe',
                navAnalyze: 'Analizuj',
                navHistory: 'Historia',
                navDatabase: 'Baza danych',
                homeTitle: 'Sfotografuj usterkÄ™',
                homeSubtitle: 'AI natychmiast zidentyfikuje problem i zaproponuje rozwiÄ…zanie',
                dropzoneText: 'PrzeciÄ…gnij zdjÄ™cie tutaj',
                dropzoneHint: 'lub kliknij aby wybraÄ‡ plik',
                dropzoneFormats: 'ObsÅ‚ugiwane formaty: JPG, PNG, GIF, WebP',
                dropzoneDrop: 'UpuÅ›Ä‡ aby przesÅ‚aÄ‡',
                uploadBtn: 'Wybierz zdjÄ™cie',
                stat30sec: '30 sekund',
                statSafe: 'Bezpieczne',
                stat500repairs: '500+ napraw',
                analyzingTitle: 'AnalizujÄ™ zdjÄ™cie...',
                analyzingStep1: 'Wykrywanie obiektu',
                analyzingStep2: 'Identyfikacja usterki',
                analyzingStep3: 'Przygotowanie instrukcji',
                detectedWith: 'Wykryto z',
                confidence: 'pewnoÅ›ciÄ…',
                identifiedProblem: 'Zidentyfikowany problem',
                repairTime: 'Czas naprawy',
                difficulty: 'TrudnoÅ›Ä‡',
                risk: 'Ryzyko',
                safetyWarning: 'OstrzeÅ¼enie bezpieczeÅ„stwa',
                startRepair: 'Rozpocznij naprawÄ™',
                callExpert: 'ZadzwoÅ„ do eksperta',
                step: 'Krok',
                of: 'z',
                toolsNeeded: 'Potrzebne narzÄ™dzia i materiaÅ‚y',
                timeRequired: 'Wymagany czas',
                allStepsOverview: 'PrzeglÄ…d wszystkich krokÃ³w',
                prevStep: 'Poprzedni krok',
                nextStep: 'NastÄ™pny krok',
                completeRepair: 'ZakoÅ„cz naprawÄ™',
                historyTitle: 'Historia napraw',
                noRepairsYet: 'Brak napraw',
                noRepairsHint: 'PrzeÅ›lij zdjÄ™cie i rozpocznij pierwszÄ… naprawÄ™',
                completed: 'ZakoÅ„czono',
                inProgress: 'W trakcie',
                filterAll: 'Wszystko',
                filterCompleted: 'ZakoÅ„czone',
                filterInProgress: 'W trakcie',
                exportCSV: 'Eksport CSV',
                repairDetails: 'SzczegÃ³Å‚y naprawy',
                totalRepairs: 'ÅÄ…czna liczba napraw',
                completedRepairs: 'ZakoÅ„czonych',
                avgTime: 'Åšredni czas',
                close: 'Zamknij',
                tools: 'NarzÄ™dzia',
                steps: 'Kroki',
                warnings: 'OstrzeÅ¼enia',
                databaseTitle: 'Baza danych usterek i napraw',
                showing: 'WyÅ›wietlono',
                outOf: 'z',
                items: 'pozycji',
                noCategoryItems: 'Brak pozycji w tej kategorii',
                tryCategoryHint: 'SprÃ³buj wybraÄ‡ innÄ… kategoriÄ™',
                aboutDatabase: 'O bazie danych',
                databaseInfo: 'Nasza baza danych zawiera ponad 500 najczÄ™stszych usterek domowych podzielonych na 12 kategorii. KaÅ¼da naprawa zawiera szczegÃ³Å‚owÄ… instrukcjÄ™, listÄ™ potrzebnych narzÄ™dzi i ostrzeÅ¼enia bezpieczeÅ„stwa.',
                catAll: 'Wszystko',
                catWater: 'Woda',
                catElectric: 'Elektryka',
                catHeating: 'Ogrzewanie',
                catDoors: 'Drzwi & Okna',
                catFurniture: 'Meble',
                catAppliances: 'UrzÄ…dzenia',
                catKitchen: 'Kuchnia',
                catBathroom: 'Åazienka',
                catWalls: 'Åšciany',
                catGarden: 'OgrÃ³d',
                footerSlogan: 'Pierwszy Å›wiatowy standard wizualnej diagnostyki domowych usterek.',
                footerFeatures: 'Funkcje',
                footerAI: 'Analiza zdjÄ™Ä‡ AI',
                footer500guides: '500+ instrukcji napraw',
                footerSafety: 'OstrzeÅ¼enia bezpieczeÅ„stwa',
                footerHistory: 'Historia napraw',
                footerContact: 'Kontakt',
                footerQuote: 'Fix Anything. Anywhere. Instantly.',
                footerCopyright: 'Â© 2025 FIXO. Wszelkie prawa zastrzeÅ¼one.',
                translating: 'TÅ‚umaczenie...',
                selectLanguage: 'Wybierz jÄ™zyk'
            },
            es: {
                appName: 'FIXO',
                appSlogan: 'Soluciones instantÃ¡neas de reparaciÃ³n del hogar',
                navAnalyze: 'Analizar',
                navHistory: 'Historial',
                navDatabase: 'Base de datos',
                homeTitle: 'FotografÃ­a el problema',
                homeSubtitle: 'La IA identifica instantÃ¡neamente el problema y ofrece soluciones',
                dropzoneText: 'Arrastra la foto aquÃ­',
                dropzoneHint: 'o haz clic para seleccionar archivo',
                dropzoneFormats: 'Formatos soportados: JPG, PNG, GIF, WebP',
                dropzoneDrop: 'Suelta para subir',
                uploadBtn: 'Seleccionar foto',
                stat30sec: '30 segundos',
                statSafe: 'Seguro',
                stat500repairs: '500+ reparaciones',
                analyzingTitle: 'Analizando foto...',
                analyzingStep1: 'DetecciÃ³n de objeto',
                analyzingStep2: 'IdentificaciÃ³n del problema',
                analyzingStep3: 'Preparando guÃ­as',
                detectedWith: 'Detectado con',
                confidence: 'de confianza',
                identifiedProblem: 'Problema identificado',
                repairTime: 'Tiempo de reparaciÃ³n',
                difficulty: 'Dificultad',
                risk: 'Riesgo',
                safetyWarning: 'Advertencia de seguridad',
                startRepair: 'Iniciar reparaciÃ³n',
                callExpert: 'Llamar experto',
                step: 'Paso',
                of: 'de',
                toolsNeeded: 'Herramientas y materiales necesarios',
                timeRequired: 'Tiempo requerido',
                allStepsOverview: 'Resumen de todos los pasos',
                prevStep: 'Paso anterior',
                nextStep: 'Siguiente paso',
                completeRepair: 'Completar reparaciÃ³n',
                historyTitle: 'Historial de reparaciones',
                noRepairsYet: 'Sin reparaciones aÃºn',
                noRepairsHint: 'Sube una foto y comienza tu primera reparaciÃ³n',
                completed: 'Completado',
                inProgress: 'En progreso',
                filterAll: 'Todo',
                filterCompleted: 'Completadas',
                filterInProgress: 'En progreso',
                exportCSV: 'Exportar CSV',
                repairDetails: 'Detalles de reparaciÃ³n',
                totalRepairs: 'Total de reparaciones',
                completedRepairs: 'Completadas',
                avgTime: 'Tiempo promedio',
                close: 'Cerrar',
                tools: 'Herramientas',
                steps: 'Pasos',
                warnings: 'Advertencias',
                databaseTitle: 'Base de datos de reparaciones',
                showing: 'Mostrando',
                outOf: 'de',
                items: 'elementos',
                noCategoryItems: 'Sin elementos en esta categorÃ­a',
                tryCategoryHint: 'Intenta seleccionar otra categorÃ­a',
                aboutDatabase: 'Sobre la base de datos',
                databaseInfo: 'Nuestra base de datos contiene mÃ¡s de 500 de las reparaciones domÃ©sticas mÃ¡s comunes divididas en 12 categorÃ­as. Cada reparaciÃ³n incluye guÃ­a detallada, lista de herramientas necesarias y advertencias de seguridad.',
                catAll: 'Todo',
                catWater: 'Agua',
                catElectric: 'Electricidad',
                catHeating: 'CalefacciÃ³n',
                catDoors: 'Puertas & Ventanas',
                catFurniture: 'Muebles',
                catAppliances: 'ElectrodomÃ©sticos',
                catKitchen: 'Cocina',
                catBathroom: 'BaÃ±o',
                catWalls: 'Paredes',
                catGarden: 'JardÃ­n',
                footerSlogan: 'El primer estÃ¡ndar mundial para diagnÃ³stico visual de reparaciones del hogar.',
                footerFeatures: 'Funciones',
                footerAI: 'AnÃ¡lisis de fotos con IA',
                footer500guides: '500+ guÃ­as de reparaciÃ³n',
                footerSafety: 'Advertencias de seguridad',
                footerHistory: 'Historial de reparaciones',
                footerContact: 'Contacto',
                footerQuote: 'Fix Anything. Anywhere. Instantly.',
                footerCopyright: 'Â© 2025 FIXO. Todos los derechos reservados.',
                translating: 'Traduciendo...',
                selectLanguage: 'Seleccionar idioma'
            },
            fr: {
                appName: 'FIXO',
                appSlogan: 'Solutions de rÃ©paration domestique instantanÃ©es',
                navAnalyze: 'Analyser',
                navHistory: 'Historique',
                navDatabase: 'Base de donnÃ©es',
                homeTitle: 'Photographiez le problÃ¨me',
                homeSubtitle: "L'IA identifie instantanÃ©ment le problÃ¨me et propose des solutions",
                dropzoneText: 'Glissez la photo ici',
                dropzoneHint: 'ou cliquez pour sÃ©lectionner un fichier',
                dropzoneFormats: 'Formats supportÃ©s: JPG, PNG, GIF, WebP',
                dropzoneDrop: 'DÃ©posez pour tÃ©lÃ©charger',
                uploadBtn: 'SÃ©lectionner photo',
                stat30sec: '30 secondes',
                statSafe: 'SÃ©curisÃ©',
                stat500repairs: '500+ rÃ©parations',
                analyzingTitle: 'Analyse de la photo...',
                analyzingStep1: "DÃ©tection d'objet",
                analyzingStep2: 'Identification du problÃ¨me',
                analyzingStep3: 'PrÃ©paration des guides',
                detectedWith: 'DÃ©tectÃ© avec',
                confidence: 'de confiance',
                identifiedProblem: 'ProblÃ¨me identifiÃ©',
                repairTime: 'Temps de rÃ©paration',
                difficulty: 'DifficultÃ©',
                risk: 'Risque',
                safetyWarning: 'Avertissement de sÃ©curitÃ©',
                startRepair: 'Commencer la rÃ©paration',
                callExpert: 'Appeler un expert',
                step: 'Ã‰tape',
                of: 'sur',
                toolsNeeded: 'Outils et matÃ©riaux nÃ©cessaires',
                timeRequired: 'Temps requis',
                allStepsOverview: 'AperÃ§u de toutes les Ã©tapes',
                prevStep: 'Ã‰tape prÃ©cÃ©dente',
                nextStep: 'Ã‰tape suivante',
                completeRepair: 'Terminer la rÃ©paration',
                historyTitle: 'Historique des rÃ©parations',
                noRepairsYet: 'Aucune rÃ©paration pour le moment',
                noRepairsHint: 'TÃ©lÃ©chargez une photo et commencez votre premiÃ¨re rÃ©paration',
                completed: 'TerminÃ©',
                inProgress: 'En cours',
                filterAll: 'Tout',
                filterCompleted: 'TerminÃ©es',
                filterInProgress: 'En cours',
                exportCSV: 'Exporter CSV',
                repairDetails: 'DÃ©tails de la rÃ©paration',
                totalRepairs: 'Total des rÃ©parations',
                completedRepairs: 'TerminÃ©es',
                avgTime: 'Temps moyen',
                close: 'Fermer',
                tools: 'Outils',
                steps: 'Ã‰tapes',
                warnings: 'Avertissements',
                databaseTitle: 'Base de donnÃ©es des rÃ©parations',
                showing: 'Affichage',
                outOf: 'sur',
                items: 'Ã©lÃ©ments',
                noCategoryItems: 'Aucun Ã©lÃ©ment dans cette catÃ©gorie',
                tryCategoryHint: 'Essayez de sÃ©lectionner une autre catÃ©gorie',
                aboutDatabase: 'Ã€ propos de la base de donnÃ©es',
                databaseInfo: "Notre base de donnÃ©es contient plus de 500 des rÃ©parations domestiques les plus courantes rÃ©parties en 12 catÃ©gories. Chaque rÃ©paration comprend un guide dÃ©taillÃ©, une liste d'outils nÃ©cessaires et des avertissements de sÃ©curitÃ©.",
                catAll: 'Tout',
                catWater: 'Eau',
                catElectric: 'Ã‰lectricitÃ©',
                catHeating: 'Chauffage',
                catDoors: 'Portes & FenÃªtres',
                catFurniture: 'Meubles',
                catAppliances: 'Appareils',
                catKitchen: 'Cuisine',
                catBathroom: 'Salle de bain',
                catWalls: 'Murs',
                catGarden: 'Jardin',
                footerSlogan: 'La premiÃ¨re norme mondiale pour le diagnostic visuel des rÃ©parations domestiques.',
                footerFeatures: 'FonctionnalitÃ©s',
                footerAI: 'Analyse photo par IA',
                footer500guides: '500+ guides de rÃ©paration',
                footerSafety: 'Avertissements de sÃ©curitÃ©',
                footerHistory: 'Historique des rÃ©parations',
                footerContact: 'Contact',
                footerQuote: 'Fix Anything. Anywhere. Instantly.',
                footerCopyright: 'Â© 2025 FIXO. Tous droits rÃ©servÃ©s.',
                translating: 'Traduction...',
                selectLanguage: 'Choisir la langue'
            }
        };

        // RozÅ¡Ã­Å™enÃ¡ databÃ¡ze zÃ¡vad a oprav - 12 kategoriÃ­
        const repairDatabase = {
            // ğŸš° VODA
            'kohoutek': {
                name: 'Kohoutek',
                category: 'voda',
                icon: 'ğŸš°',
                issues: [
                    {
                        id: 'leak',
                        name: 'KapajÃ­cÃ­ kohoutek',
                        description: 'NetÄ›snÃ­cÃ­ tÄ›snÄ›nÃ­ nebo O-krouÅ¾ek',
                        riskScore: 2,
                        difficulty: 'NÃ­zkÃ¡',
                        timeEstimate: '15 min',
                        tools: ['KlÃ­Ä', 'Å roubovÃ¡k', 'NovÃ© tÄ›snÄ›nÃ­'],
                        steps: [
                            { step: 1, action: 'ZavÅ™ete hlavnÃ­ pÅ™Ã­vod vody', time: '1 min', icon: 'ğŸš°' },
                            { step: 2, action: 'OdÅ¡roubujte hlavici kohoutku', time: '2 min', icon: 'ğŸ”§' },
                            { step: 3, action: 'VymÄ›Åˆte tÄ›snÄ›nÃ­ nebo O-krouÅ¾ek', time: '5 min', icon: 'âš™ï¸' },
                            { step: 4, action: 'Sestavte kohoutek zpÄ›t', time: '3 min', icon: 'ğŸ”©' },
                            { step: 5, action: 'PusÅ¥te vodu a zkontrolujte tÄ›snost', time: '2 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['VÅ¾dy nejdÅ™Ã­ve zavÅ™ete hlavnÃ­ pÅ™Ã­vod vody', 'MÄ›jte pÅ™ipravenÃ½ kbelÃ­k']
                    }
                ]
            },
            'wc': {
                name: 'Toaleta',
                category: 'voda',
                icon: 'ğŸš½',
                issues: [
                    {
                        id: 'running',
                        name: 'ProtÃ©kajÃ­cÃ­ WC',
                        description: 'VadnÃ½ plovÃ¡k nebo tÄ›snÄ›nÃ­',
                        riskScore: 2,
                        difficulty: 'StÅ™ednÃ­',
                        timeEstimate: '20 min',
                        tools: ['KlÃ­Ä', 'NovÃ½ plovÃ¡k nebo tÄ›snÄ›nÃ­'],
                        steps: [
                            { step: 1, action: 'ZavÅ™ete pÅ™Ã­vod vody k WC', time: '1 min', icon: 'ğŸš°' },
                            { step: 2, action: 'VyprÃ¡zdnÄ›te nÃ¡drÅ¾ku splachovÃ¡nÃ­m', time: '1 min', icon: 'ğŸš½' },
                            { step: 3, action: 'Zkontrolujte plovÃ¡k a ventil', time: '5 min', icon: 'ğŸ”' },
                            { step: 4, action: 'VymÄ›Åˆte vadnÃ© dÃ­ly', time: '10 min', icon: 'ğŸ”§' },
                            { step: 5, action: 'PusÅ¥te vodu a otestujte', time: '3 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['PouÅ¾ijte gumovÃ© rukavice', 'Dbejte na hygienu']
                    }
                ]
            },
            // âš¡ ELEKTÅ˜INA
            'zasuvka': {
                name: 'ElektrickÃ¡ zÃ¡suvka',
                category: 'elektrina',
                icon: 'ğŸ”Œ',
                issues: [
                    {
                        id: 'not-working',
                        name: 'NefunkÄnÃ­ zÃ¡suvka',
                        description: 'PÅ™eruÅ¡enÃ½ obvod nebo poÅ¡kozenÃ½ kontakt',
                        riskScore: 8,
                        difficulty: 'VysokÃ¡',
                        timeEstimate: '30 min',
                        tools: ['Tester napÄ›tÃ­', 'Å roubovÃ¡k', 'NovÃ¡ zÃ¡suvka'],
                        steps: [
                            { step: 1, action: 'âš ï¸ VYPNÄšTE JISTIÄŒ!', time: '1 min', icon: 'âš¡' },
                            { step: 2, action: 'OvÄ›Å™te testerem, Å¾e nenÃ­ napÄ›tÃ­', time: '2 min', icon: 'ğŸ”Œ' },
                            { step: 3, action: 'Demontujte kryt zÃ¡suvky', time: '2 min', icon: 'ğŸ”§' },
                            { step: 4, action: 'Zkontrolujte zapojenÃ­ vodiÄÅ¯', time: '5 min', icon: 'ğŸ”' },
                            { step: 5, action: 'VymÄ›Åˆte zÃ¡suvku nebo opravte spoje', time: '15 min', icon: 'âš™ï¸' }
                        ],
                        safetyWarnings: ['âš ï¸ POZOR! PrÃ¡ce s elektÅ™inou!', 'Pokud si nejste jisti, volejte elektrikÃ¡Å™e!', 'VÅ¾dy vypnÄ›te jistiÄ pÅ™ed pracÃ­']
                    }
                ]
            },
            'svetlo': {
                name: 'OsvÄ›tlenÃ­',
                category: 'elektrina',
                icon: 'ğŸ’¡',
                issues: [
                    {
                        id: 'flickering',
                        name: 'BlikajÃ­cÃ­ svÄ›tlo',
                        description: 'Å patnÃ½ kontakt nebo vadnÃ¡ Å¾Ã¡rovka',
                        riskScore: 5,
                        difficulty: 'StÅ™ednÃ­',
                        timeEstimate: '15 min',
                        tools: ['NovÃ¡ Å¾Ã¡rovka', 'Å roubovÃ¡k', 'Tester'],
                        steps: [
                            { step: 1, action: 'VypnÄ›te vypÃ­naÄ a jistiÄ', time: '1 min', icon: 'âš¡' },
                            { step: 2, action: 'VymÄ›Åˆte Å¾Ã¡rovku za novou', time: '2 min', icon: 'ğŸ’¡' },
                            { step: 3, action: 'Pokud blikÃ¡ dÃ¡l, zkontrolujte vypÃ­naÄ', time: '5 min', icon: 'ğŸ”' },
                            { step: 4, action: 'UtÃ¡hnÄ›te uvolnÄ›nÃ© kontakty', time: '5 min', icon: 'ğŸ”§' },
                            { step: 5, action: 'ZapnÄ›te a otestujte', time: '1 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['VÅ¾dy vypnÄ›te proud pÅ™ed pracÃ­', 'Nechte Å¾Ã¡rovku vychladnout']
                    }
                ]
            },
            // ğŸŒ¡ï¸ TOPENÃ
            'radiator': {
                name: 'RadiÃ¡tor',
                category: 'topeni',
                icon: 'ğŸŒ¡ï¸',
                issues: [
                    {
                        id: 'cold',
                        name: 'StudenÃ½ radiÃ¡tor',
                        description: 'Vzduch v topnÃ©m systÃ©mu',
                        riskScore: 2,
                        difficulty: 'NÃ­zkÃ¡',
                        timeEstimate: '10 min',
                        tools: ['OdvzduÅ¡ÅˆovacÃ­ klÃ­Ä', 'NÃ¡doba na vodu', 'HadÅ™Ã­k'],
                        steps: [
                            { step: 1, action: 'VypnÄ›te topenÃ­ a nechte vychladnout', time: '15 min', icon: 'ğŸŒ¡ï¸' },
                            { step: 2, action: 'NajdÄ›te odvzduÅ¡ÅˆovacÃ­ ventil', time: '1 min', icon: 'ğŸ”' },
                            { step: 3, action: 'Pod ventil umÃ­stÄ›te nÃ¡dobu', time: '30 s', icon: 'ğŸª£' },
                            { step: 4, action: 'Pomalu otevÅ™ete ventil klÃ­Äem', time: '2 min', icon: 'ğŸ”§' },
                            { step: 5, action: 'AÅ¾ poteÄe voda, ventil zavÅ™ete', time: '2 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['Pozor na horkou vodu', 'MÄ›jte pÅ™ipravenÃ½ hadÅ™Ã­k']
                    }
                ]
            },
            // ğŸšª DVEÅ˜E & OKNA
            'dvere': {
                name: 'DveÅ™e',
                category: 'dvere_okna',
                icon: 'ğŸšª',
                issues: [
                    {
                        id: 'squeaking',
                        name: 'VrzajÃ­cÃ­ dveÅ™e',
                        description: 'SuchÃ© panty potÅ™ebujÃ­ namazÃ¡nÃ­',
                        riskScore: 1,
                        difficulty: 'Velmi nÃ­zkÃ¡',
                        timeEstimate: '5 min',
                        tools: ['WD-40 nebo olej', 'HadÅ™Ã­k'],
                        steps: [
                            { step: 1, action: 'OtevÅ™ete dveÅ™e do poloviny', time: '10 s', icon: 'ğŸšª' },
                            { step: 2, action: 'NastÅ™Ã­kejte mazivo na panty', time: '1 min', icon: 'ğŸ”§' },
                            { step: 3, action: 'Pohybujte dveÅ™mi tam a zpÄ›t', time: '1 min', icon: 'â†”ï¸' },
                            { step: 4, action: 'SetÅ™ete pÅ™ebyteÄnÃ© mazivo', time: '1 min', icon: 'ğŸ§¹' }
                        ],
                        safetyWarnings: ['VÄ›trejte pÅ™i pouÅ¾itÃ­ sprejÅ¯']
                    }
                ]
            },
            'okno': {
                name: 'Okno',
                category: 'dvere_okna',
                icon: 'ğŸªŸ',
                issues: [
                    {
                        id: 'drafty',
                        name: 'TÃ¡hne z okna',
                        description: 'OpotÅ™ebovanÃ© tÄ›snÄ›nÃ­',
                        riskScore: 1,
                        difficulty: 'NÃ­zkÃ¡',
                        timeEstimate: '20 min',
                        tools: ['NovÃ© tÄ›snÄ›nÃ­', 'NÅ¯Å¾', 'ÄŒistiÄ'],
                        steps: [
                            { step: 1, action: 'OdstraÅˆte starÃ© tÄ›snÄ›nÃ­', time: '5 min', icon: 'ğŸ”§' },
                            { step: 2, action: 'OÄistÄ›te drÃ¡Å¾ku od neÄistot', time: '3 min', icon: 'ğŸ§¹' },
                            { step: 3, action: 'NamÄ›Å™te a ustÅ™ihnÄ›te novÃ© tÄ›snÄ›nÃ­', time: '2 min', icon: 'ğŸ“' },
                            { step: 4, action: 'ZatlaÄte tÄ›snÄ›nÃ­ do drÃ¡Å¾ky', time: '8 min', icon: 'ğŸ‘†' },
                            { step: 5, action: 'Zkontrolujte tÄ›snost zavÅ™enÃ­m okna', time: '1 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['OpatrnÄ› s ostrÃ½m noÅ¾em']
                    }
                ]
            },
            // ğŸª‘ NÃBYTEK
            'zidle': {
                name: 'Å½idle',
                category: 'nabytek',
                icon: 'ğŸª‘',
                issues: [
                    {
                        id: 'wobbly',
                        name: 'ViklajÃ­cÃ­ se Å¾idle',
                        description: 'UvolnÄ›nÃ© Å¡rouby nebo poÅ¡kozenÃ© nohy',
                        riskScore: 1,
                        difficulty: 'NÃ­zkÃ¡',
                        timeEstimate: '10 min',
                        tools: ['Å roubovÃ¡k', 'KlÃ­Ä', 'Lepidlo na dÅ™evo'],
                        steps: [
                            { step: 1, action: 'OtoÄte Å¾idli nohama nahoru', time: '30 s', icon: 'ğŸª‘' },
                            { step: 2, action: 'Zkontrolujte vÅ¡echny Å¡rouby', time: '2 min', icon: 'ğŸ”' },
                            { step: 3, action: 'DotÃ¡hnÄ›te uvolnÄ›nÃ© Å¡rouby', time: '5 min', icon: 'ğŸ”§' },
                            { step: 4, action: 'Pokud je spoj rozklÃ­Å¾enÃ½, pouÅ¾ijte lepidlo', time: '2 min', icon: 'ğŸ§´' },
                            { step: 5, action: 'Nechte zaschnout a otestujte', time: '1 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['Netestujte Å¾idli, dokud lepidlo nezaschne']
                    }
                ]
            },
            // ğŸ”Œ SPOTÅ˜EBIÄŒE
            'pracka': {
                name: 'PraÄka',
                category: 'spotrebice',
                icon: 'ğŸ§º',
                issues: [
                    {
                        id: 'not-draining',
                        name: 'PraÄka nevypouÅ¡tÃ­ vodu',
                        description: 'UcpanÃ½ filtr nebo hadice',
                        riskScore: 3,
                        difficulty: 'StÅ™ednÃ­',
                        timeEstimate: '25 min',
                        tools: ['HadÅ™Ã­k', 'NÃ¡doba', 'KartÃ¡Ä'],
                        steps: [
                            { step: 1, action: 'VypnÄ›te praÄku a odpojte ze zÃ¡suvky', time: '1 min', icon: 'ğŸ”Œ' },
                            { step: 2, action: 'NajdÄ›te servisnÃ­ dvÃ­Å™ka (dole vpÅ™edu)', time: '1 min', icon: 'ğŸ”' },
                            { step: 3, action: 'PodloÅ¾te nÃ¡dobu a pomalu otevÅ™ete filtr', time: '3 min', icon: 'ğŸª£' },
                            { step: 4, action: 'VyÄistÄ›te filtr od neÄistot', time: '10 min', icon: 'ğŸ§¹' },
                            { step: 5, action: 'VraÅ¥te filtr zpÄ›t a otestujte', time: '5 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['Pozor na vytÃ©kajÃ­cÃ­ vodu', 'VÅ¾dy odpojte ze zÃ¡suvky']
                    }
                ]
            },
            // ğŸ³ KUCHYÅ‡
            'sporÃ¡k': {
                name: 'SporÃ¡k',
                category: 'kuchyn',
                icon: 'ğŸ³',
                issues: [
                    {
                        id: 'burner-not-lighting',
                        name: 'HoÅ™Ã¡k nezapaluje',
                        description: 'UcpanÃ¡ tryska nebo vadnÃ½ zapalovaÄ',
                        riskScore: 5,
                        difficulty: 'StÅ™ednÃ­',
                        timeEstimate: '15 min',
                        tools: ['Jehla nebo Å¡pendlÃ­k', 'HadÅ™Ã­k', 'KartÃ¡Äek'],
                        steps: [
                            { step: 1, action: 'ZavÅ™ete pÅ™Ã­vod plynu', time: '1 min', icon: 'â›½' },
                            { step: 2, action: 'SejmÄ›te mÅ™Ã­Å¾ku a rozdÄ›lovaÄ plamene', time: '1 min', icon: 'ğŸ”§' },
                            { step: 3, action: 'VyÄistÄ›te trysku jehlou', time: '5 min', icon: 'ğŸ“' },
                            { step: 4, action: 'OÄistÄ›te zapalovaÄ kartÃ¡Äkem', time: '3 min', icon: 'ğŸ§¹' },
                            { step: 5, action: 'SloÅ¾te vÅ¡e zpÄ›t a otestujte', time: '2 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['VÅ¾dy zavÅ™ete plyn pÅ™ed ÄiÅ¡tÄ›nÃ­m', 'VÄ›trejte pÅ™i prÃ¡ci s plynem']
                    }
                ]
            },
            // ğŸš¿ KOUPELNA
            'sprcha': {
                name: 'SprchovÃ¡ hlavice',
                category: 'koupelna',
                icon: 'ğŸš¿',
                issues: [
                    {
                        id: 'low-pressure',
                        name: 'SlabÃ½ proud vody',
                        description: 'ZanesenÃ¡ sprchovÃ¡ hlavice vodnÃ­m kamenem',
                        riskScore: 1,
                        difficulty: 'NÃ­zkÃ¡',
                        timeEstimate: '30 min',
                        tools: ['Ocet', 'IgelitovÃ½ sÃ¡Äek', 'GumiÄka', 'KartÃ¡Äek'],
                        steps: [
                            { step: 1, action: 'NaplÅˆte sÃ¡Äek octem', time: '1 min', icon: 'ğŸ§´' },
                            { step: 2, action: 'NavlÃ©knÄ›te sÃ¡Äek na hlavici a upevnÄ›te gumiÄkou', time: '2 min', icon: 'ğŸ’' },
                            { step: 3, action: 'Nechte pÅ¯sobit 2-4 hodiny', time: '2-4 hod', icon: 'â°' },
                            { step: 4, action: 'Sundejte sÃ¡Äek a doÄistÄ›te kartÃ¡Äkem', time: '5 min', icon: 'ğŸ§¹' },
                            { step: 5, action: 'ProplÃ¡chnÄ›te vodou', time: '2 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['Ocet mÅ¯Å¾e drÃ¡Å¾dit oÄi - buÄte opatrnÃ­']
                    }
                ]
            },
            // ğŸ  STÄšNY & PODLAHY
            'stena': {
                name: 'StÄ›na',
                category: 'steny_podlahy',
                icon: 'ğŸ ',
                issues: [
                    {
                        id: 'hole',
                        name: 'DÃ­ra ve stÄ›nÄ›',
                        description: 'MalÃ¡ dÃ­ra po hmoÅ¾dince nebo hÅ™ebÃ­ku',
                        riskScore: 1,
                        difficulty: 'NÃ­zkÃ¡',
                        timeEstimate: '15 min',
                        tools: ['Tmel', 'Å pachtle', 'BrusnÃ½ papÃ­r', 'Barva'],
                        steps: [
                            { step: 1, action: 'OÄistÄ›te dÃ­ru od prachu', time: '1 min', icon: 'ğŸ§¹' },
                            { step: 2, action: 'Naneste tmel do dÃ­ry Å¡pachtlÃ­', time: '3 min', icon: 'ğŸ”§' },
                            { step: 3, action: 'UhlaÄte povrch a nechte zaschnout', time: '30 min', icon: 'â°' },
                            { step: 4, action: 'PÅ™ebruste jemnÃ½m papÃ­rem', time: '2 min', icon: 'ğŸ“„' },
                            { step: 5, action: 'PÅ™etÅ™ete barvou', time: '5 min', icon: 'ğŸ¨' }
                        ],
                        safetyWarnings: ['VÄ›trejte pÅ™i prÃ¡ci s tmelem a barvou']
                    }
                ]
            },
            // ğŸŒ± ZAHRADA
            'hadice': {
                name: 'ZahradnÃ­ hadice',
                category: 'zahrada',
                icon: 'ğŸŒ±',
                issues: [
                    {
                        id: 'leaking',
                        name: 'DÄ›ravÃ¡ hadice',
                        description: 'MalÃ¡ dÃ­ra nebo prasklina v hadici',
                        riskScore: 1,
                        difficulty: 'NÃ­zkÃ¡',
                        timeEstimate: '10 min',
                        tools: ['OpravnÃ¡ pÃ¡ska na hadice', 'NÅ¯Å¾ky', 'HadÅ™Ã­k'],
                        steps: [
                            { step: 1, action: 'NajdÄ›te mÃ­sto Ãºniku', time: '2 min', icon: 'ğŸ”' },
                            { step: 2, action: 'OsuÅ¡te a oÄistÄ›te oblast kolem dÃ­ry', time: '2 min', icon: 'ğŸ§¹' },
                            { step: 3, action: 'OdstÅ™ihnÄ›te kus opravnÃ© pÃ¡sky', time: '1 min', icon: 'âœ‚ï¸' },
                            { step: 4, action: 'PÅ™ilepte pÃ¡sku pÅ™es dÃ­ru s pÅ™esahem', time: '3 min', icon: 'ğŸ©¹' },
                            { step: 5, action: 'PusÅ¥te vodu a zkontrolujte opravu', time: '2 min', icon: 'âœ…' }
                        ],
                        safetyWarnings: ['UjistÄ›te se, Å¾e je hadice suchÃ¡ pÅ™ed lepenÃ­m']
                    }
                ]
            }
        };

        // Kategorie pro filtrovÃ¡nÃ­
        const categories = [
            { id: 'all', name: 'VÅ¡e', icon: 'ğŸ“‹' },
            { id: 'voda', name: 'Voda', icon: 'ğŸš°' },
            { id: 'elektrina', name: 'ElektÅ™ina', icon: 'âš¡' },
            { id: 'topeni', name: 'TopenÃ­', icon: 'ğŸŒ¡ï¸' },
            { id: 'dvere_okna', name: 'DveÅ™e & Okna', icon: 'ğŸšª' },
            { id: 'nabytek', name: 'NÃ¡bytek', icon: 'ğŸª‘' },
            { id: 'spotrebice', name: 'SpotÅ™ebiÄe', icon: 'ğŸ”Œ' },
            { id: 'kuchyn', name: 'KuchyÅˆ', icon: 'ğŸ³' },
            { id: 'koupelna', name: 'Koupelna', icon: 'ğŸš¿' },
            { id: 'steny_podlahy', name: 'StÄ›ny', icon: 'ğŸ ' },
            { id: 'zahrada', name: 'Zahrada', icon: 'ğŸŒ±' }
        ];

        function FixoApp() {
            const [currentView, setCurrentView] = useState('home');
            const [selectedImage, setSelectedImage] = useState(null);
            const [detectedObject, setDetectedObject] = useState(null);
            const [selectedIssue, setSelectedIssue] = useState(null);
            const [analysisResult, setAnalysisResult] = useState(null);
            const [isAnalyzing, setIsAnalyzing] = useState(false);
            const [repairHistory, setRepairHistory] = useState([]);
            const [currentStep, setCurrentStep] = useState(0);
            const [isDragging, setIsDragging] = useState(false);
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [historyFilter, setHistoryFilter] = useState('all'); // 'all', 'completed', 'in_progress'
            const [selectedRepairDetail, setSelectedRepairDetail] = useState(null);
            const fileInputRef = useRef(null);
            const dropZoneRef = useRef(null);
            const canvasRef = useRef(null);
            const [isDrawingMode, setIsDrawingMode] = useState(false);
            const [isDrawing, setIsDrawing] = useState(false);
            const [brushColor, setBrushColor] = useState('#ff0000');
            const [brushSize, setBrushSize] = useState(5);
            const [annotatedImage, setAnnotatedImage] = useState(null);

            // Filtrovat historii podle stavu
            const getFilteredHistory = () => {
                if (historyFilter === 'all') return repairHistory;
                return repairHistory.filter(item => item.status === historyFilter);
            };

            // Statistiky historie
            const getHistoryStats = () => {
                const total = repairHistory.length;
                const completed = repairHistory.filter(r => r.status === 'completed').length;
                return { total, completed, inProgress: total - completed };
            };

            // Export historie do CSV
            const exportToCSV = () => {
                if (repairHistory.length === 0) return;

                const headers = ['ID', 'Objekt', 'ZÃ¡vada', 'Datum', 'Stav', 'ÄŒas opravy'];
                const rows = repairHistory.map(item => [
                    item.id,
                    item.object,
                    item.issue,
                    item.date,
                    item.status === 'completed' ? 'DokonÄeno' : 'ProbÃ­hÃ¡',
                    item.timeEstimate || 'N/A'
                ]);

                const csvContent = [headers, ...rows]
                    .map(row => row.map(cell => `"${cell}"`).join(','))
                    .join('\n');

                const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `fixo_historie_${new Date().toISOString().split('T')[0]}.csv`;
                link.click();
                URL.revokeObjectURL(url);
            };

            // Backend API URL - Render.com pro produkci, localhost pro vÃ½voj
            const API_URL = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1'
                ? 'http://localhost:3000'
                : 'https://fixo.onrender.com'; // Render.com backend

            // === JAZYKOVÃ SYSTÃ‰M S CACHE (vlastnÃ­ slovnÃ­k pÅ™ekladÅ¯) ===
            const [currentLanguage, setCurrentLanguage] = useState(() => {
                return localStorage.getItem('fixo_language') || 'cs';
            });
            const [translations, setTranslations] = useState(() => {
                const saved = localStorage.getItem('fixo_translations');
                // SlouÄit uloÅ¾enÃ© pÅ™eklady s pÅ™edgenerovanÃ½mi (prebuilt majÃ­ prioritu)
                const savedTranslations = saved ? JSON.parse(saved) : {};
                return { cs: originalTexts, ...prebuiltTranslations, ...savedTranslations };
            });
            const [isTranslating, setIsTranslating] = useState(false);
            const [langDropdownOpen, setLangDropdownOpen] = useState(false);

            // ZÃ­skat pÅ™eklad pro aktuÃ¡lnÃ­ jazyk
            const t = (key) => {
                // Nejprve zkus pÅ™edgenerovanÃ© pÅ™eklady (pro GitHub Pages)
                if (prebuiltTranslations[currentLanguage] && prebuiltTranslations[currentLanguage][key]) {
                    return prebuiltTranslations[currentLanguage][key];
                }
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    return translations[currentLanguage][key];
                }
                return originalTexts[key] || key;
            };

            // UloÅ¾it slovnÃ­k do localStorage (permanentnÃ­ cache)
            const saveTranslations = (newTranslations) => {
                localStorage.setItem('fixo_translations', JSON.stringify(newTranslations));
                setTranslations(newTranslations);
            };

            // PoÄet pÅ™eloÅ¾enÃ½ch jazykÅ¯ ve slovnÃ­ku (pÅ™edgenerovanÃ© + uloÅ¾enÃ©)
            const getTranslatedLanguagesCount = () => {
                const allLangs = new Set([...Object.keys(translations), ...Object.keys(prebuiltTranslations), 'cs']);
                return allLangs.size;
            };

            // PÅ™eloÅ¾it texty pomocÃ­ AI a uloÅ¾it do slovnÃ­ku
            const translateTexts = async (targetLang) => {
                // Pokud mÃ¡me pÅ™edgenerovanÃ© pÅ™eklady, pouÅ¾ij je (funguje i offline!)
                if (prebuiltTranslations[targetLang]) {
                    console.log(`ğŸš€ PouÅ¾Ã­vÃ¡m pÅ™edgenerovanÃ½ pÅ™eklad pro ${targetLang}`);
                    setCurrentLanguage(targetLang);
                    localStorage.setItem('fixo_language', targetLang);
                    return;
                }

                // Pokud uÅ¾ mÃ¡me pÅ™eklady v cache, pouÅ¾ij je (instant!)
                if (translations[targetLang]) {
                    console.log(`ğŸ“š PouÅ¾Ã­vÃ¡m cache pro ${targetLang}`);
                    setCurrentLanguage(targetLang);
                    localStorage.setItem('fixo_language', targetLang);
                    return;
                }

                // Pokud je cÃ­lovÃ½ jazyk ÄeÅ¡tina, pouÅ¾ij originÃ¡l
                if (targetLang === 'cs') {
                    setCurrentLanguage('cs');
                    localStorage.setItem('fixo_language', 'cs');
                    return;
                }

                // Zkontrolovat jestli mÃ¡me API
                if (!API_URL) {
                    alert('Pro pÅ™eklad do novÃ½ch jazykÅ¯ je potÅ™eba spustit backend server.\nJakmile je jazyk pÅ™eloÅ¾en jednou, funguje offline.');
                    return;
                }

                setIsTranslating(true);

                try {
                    const textsToTranslate = Object.values(originalTexts);
                    const keys = Object.keys(originalTexts);
                    const langData = languages.find(l => l.code === targetLang);

                    const response = await fetch(`${API_URL}/api/translate`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            texts: textsToTranslate,
                            targetLanguage: langData?.native || targetLang,
                            sourceLanguage: 'ÄeÅ¡tina'
                        })
                    });

                    if (response.ok) {
                        const result = await response.json();
                        if (result.success && result.translations) {
                            // VytvoÅ™it slovnÃ­k z pÅ™eloÅ¾enÃ½ch textÅ¯
                            const newLangTranslations = {};
                            keys.forEach((key, index) => {
                                newLangTranslations[key] = result.translations[index] || originalTexts[key];
                            });

                            // UloÅ¾it do permanentnÃ­ cache (slovnÃ­ku)
                            const newTranslations = {
                                ...translations,
                                [targetLang]: newLangTranslations
                            };
                            saveTranslations(newTranslations);
                            setCurrentLanguage(targetLang);
                            localStorage.setItem('fixo_language', targetLang);

                            console.log(`âœ… ${langData?.name || targetLang} pÅ™idÃ¡n do slovnÃ­ku! Celkem jazykÅ¯: ${Object.keys(newTranslations).length}`);
                        }
                    }
                } catch (error) {
                    console.error('Chyba pÅ™i pÅ™ekladu:', error);
                    alert('NepodaÅ™ilo se pÅ™eloÅ¾it. Zkuste to znovu.');
                }

                setIsTranslating(false);
            };

            // ZmÄ›nit jazyk
            const changeLanguage = (langCode) => {
                setLangDropdownOpen(false);
                translateTexts(langCode);
            };

            // ZÃ­skat aktuÃ¡lnÃ­ jazyk
            const getCurrentLanguageData = () => {
                return languages.find(l => l.code === currentLanguage) || languages[0];
            };

            // Zjistit jestli jazyk je v cache (vÄetnÄ› pÅ™edgenerovanÃ½ch)
            const isLanguageCached = (langCode) => {
                return langCode === 'cs' || !!prebuiltTranslations[langCode] || !!translations[langCode];
            };

            // AI analÃ½za fotky - pouÅ¾ije backend API nebo simulaci
            const analyzeImage = async (imageData) => {
                setIsAnalyzing(true);
                setCurrentView('analyzing');

                try {
                    // Pokud bÄ›Å¾Ã­me s backendem, pouÅ¾ij skuteÄnÃ© AI
                    if (API_URL && imageData) {
                        console.log('ğŸš€ OdesÃ­lÃ¡m na API:', API_URL);
                        console.log('ğŸ“¦ Velikost obrÃ¡zku:', Math.round(imageData.length / 1024), 'KB');

                        const response = await fetch(`${API_URL}/api/analyze-base64`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ image: imageData })
                        });

                        console.log('ğŸ“¡ Response status:', response.status);

                        if (response.ok) {
                            const result = await response.json();
                            console.log('âœ… API odpovÄ›Ä:', result);

                            if (result.success) {
                                const data = result.data;
                                setAnalysisResult({
                                    object: {
                                        name: data.detection.object.name,
                                        category: data.detection.object.category,
                                        icon: getCategoryIcon(data.detection.object.category)
                                    },
                                    issue: {
                                        name: data.detection.issue.name,
                                        description: data.detection.issue.description,
                                        riskScore: data.detection.issue.riskScore,
                                        difficulty: data.detection.issue.difficulty,
                                        timeEstimate: data.recommendations.timeEstimate,
                                        tools: data.recommendations.tools,
                                        steps: data.recommendations.steps,
                                        safetyWarnings: data.recommendations.safetyWarnings
                                    },
                                    confidence: Math.round(data.detection.object.confidence * 100)
                                });
                                setIsAnalyzing(false);
                                setCurrentView('results');
                                return;
                            } else {
                                console.error('âŒ API vrÃ¡tilo success: false', result);
                            }
                        } else {
                            const errorText = await response.text();
                            console.error('âŒ API error:', response.status, errorText);
                        }
                    } else {
                        console.log('âš ï¸ API_URL nenÃ­ nastaveno nebo chybÃ­ obrÃ¡zek');
                    }

                    // Fallback: SimulovanÃ¡ analÃ½za (pro GitHub Pages nebo pÅ™i chybÄ› API)
                    console.log('ğŸ”„ PouÅ¾Ã­vÃ¡m SIMULACI (API selhalo nebo nenÃ­ dostupnÃ©)');
                    await new Promise(resolve => setTimeout(resolve, 2500));
                    const objects = Object.keys(repairDatabase);
                    const randomObject = objects[Math.floor(Math.random() * objects.length)];
                    const objectData = repairDatabase[randomObject];
                    const randomIssue = objectData.issues[0];

                    setAnalysisResult({
                        object: objectData,
                        issue: randomIssue,
                        confidence: Math.floor(Math.random() * 20) + 80
                    });
                } catch (error) {
                    console.error('Chyba pÅ™i analÃ½ze:', error);
                    // Fallback na simulaci pÅ™i chybÄ›
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    const objects = Object.keys(repairDatabase);
                    const randomObject = objects[Math.floor(Math.random() * objects.length)];
                    const objectData = repairDatabase[randomObject];
                    const randomIssue = objectData.issues[0];

                    setAnalysisResult({
                        object: objectData,
                        issue: randomIssue,
                        confidence: Math.floor(Math.random() * 20) + 80
                    });
                }

                setIsAnalyzing(false);
                setCurrentView('results');
            };

            // PomocnÃ¡ funkce pro zÃ­skÃ¡nÃ­ ikony kategorie
            const getCategoryIcon = (category) => {
                const icons = {
                    voda: 'ğŸš°', elektrina: 'âš¡', topeni: 'ğŸŒ¡ï¸',
                    dvere_okna: 'ğŸšª', nabytek: 'ğŸª‘', spotrebice: 'ğŸ”Œ',
                    kuchyn: 'ğŸ³', koupelna: 'ğŸš¿', steny_podlahy: 'ğŸ ', zahrada: 'ğŸŒ±'
                };
                return icons[category] || 'ğŸ”§';
            };

            // === KRESLENÃ NA FOTKU ===
            const initCanvas = () => {
                const canvas = canvasRef.current;
                if (!canvas || !selectedImage) return;

                const img = new Image();
                img.onload = () => {
                    canvas.width = img.width;
                    canvas.height = img.height;
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(img, 0, 0);
                };
                img.src = selectedImage;
            };

            // Efekt pro inicializaci canvasu kdyÅ¾ se zmÄ›nÃ­ obrÃ¡zek
            useEffect(() => {
                if (selectedImage && isDrawingMode) {
                    initCanvas();
                }
            }, [selectedImage, isDrawingMode]);

            const startDrawing = (e) => {
                if (!isDrawingMode) return;
                setIsDrawing(true);
                draw(e);
            };

            const stopDrawing = () => {
                setIsDrawing(false);
                const canvas = canvasRef.current;
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    ctx.beginPath();
                }
            };

            const draw = (e) => {
                if (!isDrawing || !isDrawingMode) return;
                const canvas = canvasRef.current;
                if (!canvas) return;

                const ctx = canvas.getContext('2d');
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;

                // Podpora pro touch i mouse
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;

                const x = (clientX - rect.left) * scaleX;
                const y = (clientY - rect.top) * scaleY;

                ctx.lineWidth = brushSize * 2;
                ctx.lineCap = 'round';
                ctx.strokeStyle = brushColor;
                ctx.lineTo(x, y);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(x, y);
            };

            const clearCanvas = () => {
                initCanvas();
            };

            const saveAnnotatedImage = () => {
                const canvas = canvasRef.current;
                if (canvas) {
                    const dataUrl = canvas.toDataURL('image/jpeg', 0.8);
                    setAnnotatedImage(dataUrl);
                    setIsDrawingMode(false);
                    return dataUrl;
                }
                return selectedImage;
            };

            const analyzeWithAnnotation = () => {
                const imageToAnalyze = saveAnnotatedImage();
                analyzeImage(imageToAnalyze);
            };

            const handleImageUpload = (event) => {
                const file = event.target.files[0];
                if (file) {
                    processFile(file);
                }
            };

            // Komprese obrÃ¡zku pÅ™ed odeslÃ¡nÃ­m (pro iPhone a vysokÃ© rozliÅ¡enÃ­)
            const compressImage = (file, maxWidth = 1920, quality = 0.8) => {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const img = new Image();
                        img.onload = () => {
                            const canvas = document.createElement('canvas');
                            let width = img.width;
                            let height = img.height;

                            // ZmenÅ¡it pokud je vÄ›tÅ¡Ã­ neÅ¾ maxWidth
                            if (width > maxWidth) {
                                height = Math.round((height * maxWidth) / width);
                                width = maxWidth;
                            }

                            canvas.width = width;
                            canvas.height = height;

                            const ctx = canvas.getContext('2d');
                            ctx.drawImage(img, 0, 0, width, height);

                            // Komprimovat jako JPEG
                            const compressedData = canvas.toDataURL('image/jpeg', quality);
                            console.log(`Komprese: ${(file.size / 1024 / 1024).toFixed(2)}MB -> ${(compressedData.length / 1024 / 1024).toFixed(2)}MB`);
                            resolve(compressedData);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(file);
                });
            };

            const processFile = async (file) => {
                if (file && file.type.startsWith('image/')) {
                    // Komprimovat obrÃ¡zek pÅ™ed odeslÃ¡nÃ­m
                    const compressedImage = await compressImage(file);
                    setSelectedImage(compressedImage);
                    setAnnotatedImage(null);
                    setIsDrawingMode(false);
                    setCurrentView('preview'); // Zobrazit nÃ¡hled s moÅ¾nostÃ­ kreslenÃ­
                }
            };

            // Drag & Drop handlers
            const handleDragOver = (e) => {
                e.preventDefault();
                e.stopPropagation();
                setIsDragging(true);
            };

            const handleDragLeave = (e) => {
                e.preventDefault();
                e.stopPropagation();
                setIsDragging(false);
            };

            const handleDrop = (e) => {
                e.preventDefault();
                e.stopPropagation();
                setIsDragging(false);

                const files = e.dataTransfer.files;
                if (files && files.length > 0) {
                    processFile(files[0]);
                }
            };

            // FiltrovÃ¡nÃ­ databÃ¡ze podle kategorie
            const getFilteredDatabase = () => {
                if (selectedCategory === 'all') {
                    return Object.entries(repairDatabase);
                }
                return Object.entries(repairDatabase).filter(([key, item]) =>
                    item.category === selectedCategory
                );
            };

            const startRepair = (issue) => {
                setSelectedIssue(issue);
                setCurrentStep(0);
                setCurrentView('repair');

                // PÅ™idat do historie s detaily
                const historyItem = {
                    id: Date.now(),
                    date: new Date().toLocaleString('cs-CZ'),
                    object: analysisResult.object.name,
                    issue: issue.name,
                    status: 'in_progress',
                    timeEstimate: issue.timeEstimate,
                    tools: issue.tools || [],
                    steps: issue.steps || [],
                    riskScore: issue.riskScore,
                    difficulty: issue.difficulty
                };
                setRepairHistory([historyItem, ...repairHistory]);
            };

            const completeRepair = () => {
                // Aktualizovat historii
                setRepairHistory(prev => prev.map(item =>
                    item.id === repairHistory[0].id
                        ? {...item, status: 'completed'}
                        : item
                ));
                setCurrentView('home');
                setSelectedImage(null);
                setAnalysisResult(null);
                setSelectedIssue(null);
                setCurrentStep(0);
            };

            return (
                <div className="app-bg">
                    {/* PÅ™eklÃ¡dÃ¡nÃ­ overlay */}
                    {isTranslating && (
                        <div className="translating-overlay">
                            <div className="translating-box">
                                <div className="spinner spinner-lg mb-4"></div>
                                <h3 style={{fontSize: 'var(--text-xl)', fontWeight: 'var(--font-bold)', marginBottom: 'var(--space-2)'}}>
                                    {t('translating')}
                                </h3>
                                <p className="text-secondary">VytvÃ¡Å™Ã­m slovnÃ­k pro tento jazyk...</p>
                                <p className="text-muted" style={{fontSize: 'var(--text-sm)', marginTop: 'var(--space-2)'}}>
                                    (pÅ™Ã­Å¡tÄ› bude pÅ™epnutÃ­ okamÅ¾itÃ©)
                                </p>
                            </div>
                        </div>
                    )}

                    {/* Header */}
                    <header className="header">
                        <div className="container">
                            <div className="header-content">
                                <div className="flex items-center" style={{cursor: 'pointer'}} onClick={() => setCurrentView('home')}>
                                    <span className="logo mr-4">{t('appName')}</span>
                                    <span className="text-secondary hide-mobile" style={{fontSize: 'var(--text-sm)'}}>
                                        {t('appSlogan')}
                                    </span>
                                </div>

                                <nav className="nav">
                                    <button
                                        onClick={() => setCurrentView('home')}
                                        className={currentView === 'home' ? 'nav-link nav-link-active' : 'nav-link'}
                                    >
                                        <i className="fas fa-camera mr-2"></i>
                                        {t('navAnalyze')}
                                    </button>
                                    <button
                                        onClick={() => setCurrentView('history')}
                                        className={currentView === 'history' ? 'nav-link nav-link-active' : 'nav-link'}
                                    >
                                        <i className="fas fa-history mr-2"></i>
                                        {t('navHistory')}
                                    </button>
                                    <button
                                        onClick={() => setCurrentView('knowledge')}
                                        className={currentView === 'knowledge' ? 'nav-link nav-link-active' : 'nav-link'}
                                    >
                                        <i className="fas fa-book mr-2"></i>
                                        {t('navDatabase')}
                                    </button>
                                </nav>

                                {/* JazykovÃ½ pÅ™epÃ­naÄ - vpravo */}
                                <div className="language-selector" style={{marginLeft: 'var(--space-4)'}}>
                                    <button
                                        className="language-btn"
                                        onClick={() => setLangDropdownOpen(!langDropdownOpen)}
                                    >
                                        <span className="language-flag">{getCurrentLanguageData().flag}</span>
                                        <span className="hide-mobile">{getCurrentLanguageData().native}</span>
                                        <i className={`fas fa-chevron-${langDropdownOpen ? 'up' : 'down'}`} style={{fontSize: 'var(--text-xs)'}}></i>
                                    </button>

                                    <div className={`language-dropdown ${langDropdownOpen ? '' : 'language-dropdown-hidden'}`}>
                                        <div style={{padding: 'var(--space-2)', borderBottom: '1px solid var(--color-border)', background: 'var(--color-bg-secondary)'}}>
                                            <span style={{fontSize: 'var(--text-xs)', color: 'var(--color-text-muted)'}}>
                                                ğŸ“š SlovnÃ­k: {getTranslatedLanguagesCount()} jazykÅ¯
                                            </span>
                                        </div>
                                        {languages.map(lang => (
                                            <div
                                                key={lang.code}
                                                className={`language-option ${currentLanguage === lang.code ? 'active' : ''}`}
                                                onClick={() => changeLanguage(lang.code)}
                                            >
                                                <span className="language-flag">{lang.flag}</span>
                                                <span>{lang.native}</span>
                                                {isLanguageCached(lang.code) && (
                                                    <i className="fas fa-check-circle" style={{marginLeft: 'auto', color: 'var(--color-success)', fontSize: 'var(--text-xs)'}}></i>
                                                )}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Main Content */}
                    <main className="main container py-8">
                        {/* Home View - Camera/Upload */}
                        {currentView === 'home' && (
                            <div className="center-content">
                                <div className="upload-card max-w-md w-full">
                                    <div className="text-center mb-6">
                                        <h1 style={{fontSize: 'var(--text-2xl)', fontWeight: 'var(--font-bold)', color: 'var(--color-text-primary)', marginBottom: 'var(--space-2)'}}>
                                            {t('homeTitle')}
                                        </h1>
                                        <p className="text-secondary">
                                            {t('homeSubtitle')}
                                        </p>
                                    </div>

                                    <input
                                        ref={fileInputRef}
                                        type="file"
                                        accept="image/*"
                                        onChange={handleImageUpload}
                                        className="hidden"
                                    />

                                    {/* Drag & Drop Zone */}
                                    <div
                                        ref={dropZoneRef}
                                        className={`drop-zone ${isDragging ? 'drag-over' : ''}`}
                                        onDragOver={handleDragOver}
                                        onDragLeave={handleDragLeave}
                                        onDrop={handleDrop}
                                        onClick={() => fileInputRef.current.click()}
                                    >
                                        <div className="drop-zone-icon">
                                            {isDragging ? (
                                                <i className="fas fa-cloud-upload-alt"></i>
                                            ) : (
                                                <i className="fas fa-camera"></i>
                                            )}
                                        </div>
                                        <p style={{fontSize: 'var(--text-lg)', fontWeight: 'var(--font-semibold)', marginBottom: 'var(--space-2)', color: 'var(--color-text-primary)'}}>
                                            {isDragging ? t('dropzoneDrop') : t('dropzoneText')}
                                        </p>
                                        <p className="text-secondary" style={{fontSize: 'var(--text-sm)'}}>
                                            {t('dropzoneHint')}
                                        </p>
                                        <p className="text-muted" style={{fontSize: 'var(--text-xs)', marginTop: 'var(--space-2)'}}>
                                            {t('dropzoneFormats')}
                                        </p>
                                    </div>

                                    <button
                                        onClick={() => fileInputRef.current.click()}
                                        className="btn btn-primary btn-xl btn-block hover-scale"
                                    >
                                        <i className="fas fa-camera mr-2"></i>
                                        {t('uploadBtn')}
                                    </button>

                                    <div className="grid grid-3 mt-6 gap-2">
                                        <div className="quick-stat">
                                            <i className="fas fa-clock" style={{color: 'var(--color-primary)', marginBottom: 'var(--space-1)', display: 'block'}}></i>
                                            <div style={{fontSize: 'var(--text-sm)'}}>{t('stat30sec')}</div>
                                        </div>
                                        <div className="quick-stat">
                                            <i className="fas fa-shield-alt" style={{color: 'var(--color-success)', marginBottom: 'var(--space-1)', display: 'block'}}></i>
                                            <div style={{fontSize: 'var(--text-sm)'}}>{t('statSafe')}</div>
                                        </div>
                                        <div className="quick-stat">
                                            <i className="fas fa-tools" style={{color: 'var(--color-warning)', marginBottom: 'var(--space-1)', display: 'block'}}></i>
                                            <div style={{fontSize: 'var(--text-sm)'}}>{t('stat500repairs')}</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Quick Examples */}
                                <div className="grid grid-4 mt-8 max-w-lg w-full gap-4">
                                    {[
                                        { icon: 'ğŸš°', name: 'KapajÃ­cÃ­ kohoutek' },
                                        { icon: 'ğŸš½', name: 'ProtÃ©kajÃ­cÃ­ WC' },
                                        { icon: 'ğŸ”Œ', name: 'NefunkÄnÃ­ zÃ¡suvka' },
                                        { icon: 'ğŸšª', name: 'VrzajÃ­cÃ­ dveÅ™e' }
                                    ].map((item, idx) => (
                                        <div key={idx} className="example-card">
                                            <div style={{fontSize: 'var(--text-3xl)', marginBottom: 'var(--space-2)'}}>{item.icon}</div>
                                            <div style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-secondary)'}}>{item.name}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* Preview View - NÃ¡hled s moÅ¾nostÃ­ kreslenÃ­ */}
                        {currentView === 'preview' && selectedImage && (
                            <div className="center-content">
                                <div className="upload-card max-w-lg w-full">
                                    <div className="text-center mb-4">
                                        <h2 style={{fontSize: 'var(--text-xl)', fontWeight: 'var(--font-bold)', marginBottom: 'var(--space-2)'}}>
                                            <i className="fas fa-edit mr-2"></i>
                                            OznaÄte problÃ©m na fotce
                                        </h2>
                                        <p className="text-secondary">
                                            Nakreslete kruh nebo Å¡ipku k mÃ­stu s problÃ©mem pro pÅ™esnÄ›jÅ¡Ã­ analÃ½zu
                                        </p>
                                    </div>

                                    {/* Canvas / Image container */}
                                    <div style={{position: 'relative', marginBottom: 'var(--space-4)'}}>
                                        {isDrawingMode ? (
                                            <canvas
                                                ref={canvasRef}
                                                onMouseDown={startDrawing}
                                                onMouseMove={draw}
                                                onMouseUp={stopDrawing}
                                                onMouseLeave={stopDrawing}
                                                onTouchStart={startDrawing}
                                                onTouchMove={draw}
                                                onTouchEnd={stopDrawing}
                                                style={{
                                                    width: '100%',
                                                    maxHeight: '400px',
                                                    objectFit: 'contain',
                                                    borderRadius: 'var(--radius-lg)',
                                                    cursor: 'crosshair',
                                                    touchAction: 'none'
                                                }}
                                            />
                                        ) : (
                                            <img
                                                src={annotatedImage || selectedImage}
                                                alt="NahranÃ¡ fotka"
                                                style={{
                                                    width: '100%',
                                                    maxHeight: '400px',
                                                    objectFit: 'contain',
                                                    borderRadius: 'var(--radius-lg)'
                                                }}
                                            />
                                        )}
                                    </div>

                                    {/* KreslÃ­cÃ­ nÃ¡stroje */}
                                    {isDrawingMode && (
                                        <div className="card mb-4" style={{padding: 'var(--space-3)', background: 'var(--color-bg-secondary)'}}>
                                            <div className="flex-between flex-wrap gap-3">
                                                <div className="flex items-center gap-3">
                                                    <label style={{fontSize: 'var(--text-sm)'}}>Barva:</label>
                                                    <div className="flex gap-2">
                                                        {['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ffffff'].map(color => (
                                                            <button
                                                                key={color}
                                                                onClick={() => setBrushColor(color)}
                                                                style={{
                                                                    width: '28px',
                                                                    height: '28px',
                                                                    borderRadius: '50%',
                                                                    backgroundColor: color,
                                                                    border: brushColor === color ? '3px solid var(--color-text-primary)' : '2px solid var(--color-border)',
                                                                    cursor: 'pointer'
                                                                }}
                                                            />
                                                        ))}
                                                    </div>
                                                </div>
                                                <div className="flex items-center gap-3">
                                                    <label style={{fontSize: 'var(--text-sm)'}}>Velikost:</label>
                                                    <input
                                                        type="range"
                                                        min="2"
                                                        max="15"
                                                        value={brushSize}
                                                        onChange={(e) => setBrushSize(parseInt(e.target.value))}
                                                        style={{width: '80px'}}
                                                    />
                                                </div>
                                                <button onClick={clearCanvas} className="btn btn-secondary" style={{padding: 'var(--space-2) var(--space-3)'}}>
                                                    <i className="fas fa-eraser mr-1"></i> Smazat
                                                </button>
                                            </div>
                                        </div>
                                    )}

                                    {/* AkÄnÃ­ tlaÄÃ­tka */}
                                    <div className="flex gap-3" style={{flexWrap: 'wrap'}}>
                                        {!isDrawingMode ? (
                                            <>
                                                <button
                                                    onClick={() => setIsDrawingMode(true)}
                                                    className="btn btn-secondary flex-1"
                                                >
                                                    <i className="fas fa-pencil-alt mr-2"></i>
                                                    OznaÄit problÃ©m
                                                </button>
                                                <button
                                                    onClick={() => analyzeImage(annotatedImage || selectedImage)}
                                                    className="btn btn-primary flex-1"
                                                >
                                                    <i className="fas fa-search mr-2"></i>
                                                    Analyzovat
                                                </button>
                                            </>
                                        ) : (
                                            <>
                                                <button
                                                    onClick={() => {
                                                        setIsDrawingMode(false);
                                                        setAnnotatedImage(null);
                                                    }}
                                                    className="btn btn-secondary flex-1"
                                                >
                                                    <i className="fas fa-times mr-2"></i>
                                                    ZruÅ¡it
                                                </button>
                                                <button
                                                    onClick={analyzeWithAnnotation}
                                                    className="btn btn-primary flex-1"
                                                >
                                                    <i className="fas fa-check mr-2"></i>
                                                    Hotovo - Analyzovat
                                                </button>
                                            </>
                                        )}
                                    </div>

                                    {/* NovÃ¡ fotka */}
                                    <button
                                        onClick={() => {
                                            setSelectedImage(null);
                                            setAnnotatedImage(null);
                                            setIsDrawingMode(false);
                                            setCurrentView('home');
                                        }}
                                        className="btn btn-link mt-4"
                                        style={{width: '100%'}}
                                    >
                                        <i className="fas fa-camera mr-2"></i>
                                        NahrÃ¡t jinou fotku
                                    </button>
                                </div>
                            </div>
                        )}

                        {/* Analyzing View */}
                        {currentView === 'analyzing' && (
                            <div className="center-content">
                                <div className="upload-card max-w-md w-full">
                                    <div className="text-center">
                                        {selectedImage && (
                                            <img
                                                src={selectedImage}
                                                alt="AnalyzovanÃ¡ fotka"
                                                className="image-preview mb-6"
                                            />
                                        )}
                                        <div className="flex-center mb-4">
                                            <div className="spinner spinner-lg"></div>
                                        </div>
                                        <h2 style={{fontSize: 'var(--text-xl)', fontWeight: 'var(--font-bold)', marginBottom: 'var(--space-2)'}}>
                                            {t('analyzingTitle')}
                                        </h2>
                                        <div className="text-secondary" style={{display: 'flex', flexDirection: 'column', gap: 'var(--space-2)'}}>
                                            <div className="flex-center">
                                                <i className="fas fa-check-circle mr-2" style={{color: 'var(--color-success)'}}></i>
                                                {t('analyzingStep1')}
                                            </div>
                                            <div className="flex-center animate-pulse">
                                                <i className="fas fa-spinner fa-spin mr-2" style={{color: 'var(--color-primary)'}}></i>
                                                {t('analyzingStep2')}
                                            </div>
                                            <div className="flex-center text-muted">
                                                <i className="far fa-circle mr-2"></i>
                                                {t('analyzingStep3')}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Results View */}
                        {currentView === 'results' && analysisResult && (
                            <div className="max-w-lg mx-auto">
                                <div className="card">
                                    {/* Detection Header */}
                                    <div className="result-header">
                                        <div className="flex-between">
                                            <div>
                                                <h2 style={{fontSize: 'var(--text-2xl)', fontWeight: 'var(--font-bold)', marginBottom: 'var(--space-2)'}}>
                                                    {analysisResult.object.name}
                                                </h2>
                                                <p style={{opacity: 0.9}}>
                                                    {t('detectedWith')} {analysisResult.confidence}% {t('confidence')}
                                                </p>
                                            </div>
                                            <div style={{fontSize: 'var(--text-5xl)'}}>
                                                {analysisResult.issue.id === 'leak' && 'ğŸš°'}
                                                {analysisResult.issue.id === 'running' && 'ğŸš½'}
                                                {analysisResult.issue.id === 'not-working' && 'ğŸ”Œ'}
                                                {analysisResult.issue.id === 'squeaking' && 'ğŸšª'}
                                                {analysisResult.issue.id === 'cold' && 'ğŸŒ¡ï¸'}
                                            </div>
                                        </div>
                                    </div>

                                    {/* Issue Details */}
                                    <div className="card-body">
                                        <div className="mb-6">
                                            <h3 style={{fontSize: 'var(--text-lg)', fontWeight: 'var(--font-semibold)', marginBottom: 'var(--space-2)'}}>
                                                {t('identifiedProblem')}
                                            </h3>
                                            <div className="alert alert-danger">
                                                <p className="alert-title">{analysisResult.issue.name}</p>
                                                <p style={{fontSize: 'var(--text-sm)', marginTop: 'var(--space-1)'}}>
                                                    {analysisResult.issue.description}
                                                </p>
                                            </div>
                                        </div>

                                        {/* Quick Info */}
                                        <div className="grid grid-3 gap-4 mb-6">
                                            <div className="info-box">
                                                <i className="fas fa-clock" style={{color: 'var(--color-primary)', fontSize: 'var(--text-2xl)', marginBottom: 'var(--space-2)', display: 'block'}}></i>
                                                <div style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-secondary)'}}>{t('repairTime')}</div>
                                                <div className="font-semibold">{analysisResult.issue.timeEstimate}</div>
                                            </div>
                                            <div className="info-box">
                                                <i className="fas fa-signal" style={{color: 'var(--color-warning)', fontSize: 'var(--text-2xl)', marginBottom: 'var(--space-2)', display: 'block'}}></i>
                                                <div style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-secondary)'}}>{t('difficulty')}</div>
                                                <div className="font-semibold">{analysisResult.issue.difficulty}</div>
                                            </div>
                                            <div className="info-box">
                                                <i className="fas fa-exclamation-triangle" style={{color: 'var(--color-danger)', fontSize: 'var(--text-2xl)', marginBottom: 'var(--space-2)', display: 'block'}}></i>
                                                <div style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-secondary)'}}>{t('risk')}</div>
                                                <div className="font-semibold">{analysisResult.issue.riskScore}/10</div>
                                            </div>
                                        </div>

                                        {/* Safety Warnings */}
                                        {analysisResult.issue.riskScore > 5 && (
                                            <div className="alert alert-warning mb-6">
                                                <p className="alert-title">
                                                    <i className="fas fa-exclamation-triangle mr-2"></i>
                                                    {t('safetyWarning')}
                                                </p>
                                                <ul style={{fontSize: 'var(--text-sm)', marginTop: 'var(--space-2)'}}>
                                                    {analysisResult.issue.safetyWarnings.map((warning, idx) => (
                                                        <li key={idx}>â€¢ {warning}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        )}

                                        {/* Action Buttons */}
                                        <div className="flex gap-4">
                                            <button
                                                onClick={() => startRepair(analysisResult.issue)}
                                                className="btn btn-success flex-1"
                                            >
                                                <i className="fas fa-wrench mr-2"></i>
                                                {t('startRepair')}
                                            </button>
                                            <button
                                                onClick={() => setCurrentView('home')}
                                                className="btn btn-secondary flex-1"
                                            >
                                                <i className="fas fa-phone mr-2"></i>
                                                {t('callExpert')}
                                            </button>
                                        </div>
                                    </div>

                                    {/* Premium Section */}
                                    <div style={{
                                        background: 'linear-gradient(135deg, #fef3c7 0%, #fde68a 100%)',
                                        padding: 'var(--space-6)',
                                        borderTop: '2px solid #f59e0b'
                                    }}>
                                        <div className="flex-between mb-4">
                                            <h3 style={{fontWeight: 'var(--font-bold)', color: '#92400e'}}>
                                                <i className="fas fa-crown mr-2" style={{color: '#f59e0b'}}></i>
                                                FIXO Premium
                                            </h3>
                                            <span className="badge" style={{background: '#f59e0b', color: 'white', fontSize: 'var(--text-lg)', padding: 'var(--space-2) var(--space-4)'}}>
                                                3,99 â‚¬
                                            </span>
                                        </div>

                                        <div style={{display: 'grid', gap: 'var(--space-3)'}}>
                                            {/* DetailnÃ­ schÃ©ma */}
                                            <div className="flex items-center gap-3" style={{padding: 'var(--space-3)', background: 'rgba(255,255,255,0.7)', borderRadius: 'var(--radius-lg)'}}>
                                                <i className="fas fa-project-diagram" style={{fontSize: 'var(--text-xl)', color: '#2563eb'}}></i>
                                                <div>
                                                    <strong>DetailnÃ­ schÃ©ma opravy</strong>
                                                    <p style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-muted)', margin: 0}}>
                                                        InteraktivnÃ­ diagram s rozloÅ¾enÃ½m pohledem
                                                    </p>
                                                </div>
                                            </div>

                                            {/* DoporuÄenÃ© produkty */}
                                            <div className="flex items-center gap-3" style={{padding: 'var(--space-3)', background: 'rgba(255,255,255,0.7)', borderRadius: 'var(--radius-lg)'}}>
                                                <i className="fas fa-shopping-cart" style={{fontSize: 'var(--text-xl)', color: '#16a34a'}}></i>
                                                <div>
                                                    <strong>DoporuÄenÃ© produkty</strong>
                                                    <p style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-muted)', margin: 0}}>
                                                        NÃ¡stroje a materiÃ¡ly s odkazy na e-shopy
                                                    </p>
                                                </div>
                                            </div>

                                            {/* MÃ­stnÃ­ opravÃ¡Å™i */}
                                            <div className="flex items-center gap-3" style={{padding: 'var(--space-3)', background: 'rgba(255,255,255,0.7)', borderRadius: 'var(--radius-lg)'}}>
                                                <i className="fas fa-map-marker-alt" style={{fontSize: 'var(--text-xl)', color: '#dc2626'}}></i>
                                                <div>
                                                    <strong>OpravÃ¡Å™i ve vaÅ¡em okolÃ­</strong>
                                                    <p style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-muted)', margin: 0}}>
                                                        Kontakty na ovÄ›Å™enÃ© odbornÃ­ky poblÃ­Å¾
                                                    </p>
                                                </div>
                                            </div>

                                            {/* Video nÃ¡vod */}
                                            <div className="flex items-center gap-3" style={{padding: 'var(--space-3)', background: 'rgba(255,255,255,0.7)', borderRadius: 'var(--radius-lg)'}}>
                                                <i className="fas fa-video" style={{fontSize: 'var(--text-xl)', color: '#9333ea'}}></i>
                                                <div>
                                                    <strong>Video nÃ¡vod</strong>
                                                    <p style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-muted)', margin: 0}}>
                                                        Krok za krokem s profesionÃ¡lem
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        <button
                                            className="btn w-full mt-4"
                                            style={{
                                                background: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)',
                                                color: 'white',
                                                fontWeight: 'var(--font-bold)',
                                                fontSize: 'var(--text-lg)',
                                                padding: 'var(--space-4)'
                                            }}
                                            onClick={() => alert('PlatebnÃ­ brÃ¡na bude dostupnÃ¡ brzy!\n\nCena: 3,99 â‚¬\n\nZÃ­skÃ¡te:\nâ€¢ DetailnÃ­ schÃ©ma\nâ€¢ Odkazy na produkty\nâ€¢ Kontakty na opravÃ¡Å™e\nâ€¢ Video nÃ¡vod')}
                                        >
                                            <i className="fas fa-unlock mr-2"></i>
                                            Odemknout Premium
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Repair Steps View */}
                        {currentView === 'repair' && selectedIssue && (
                            <div className="max-w-lg mx-auto">
                                <div className="card">
                                    {/* Progress Bar */}
                                    <div className="progress" style={{borderRadius: 0}}>
                                        <div
                                            className="progress-bar"
                                            style={{ width: `${((currentStep + 1) / selectedIssue.steps.length) * 100}%` }}
                                        ></div>
                                    </div>

                                    {/* Tools Needed */}
                                    <div style={{background: 'var(--color-info-light)', padding: 'var(--space-6)', borderBottom: '1px solid var(--color-border)'}}>
                                        <h3 style={{fontWeight: 'var(--font-semibold)', color: '#0c4a6e', marginBottom: 'var(--space-3)'}}>
                                            <i className="fas fa-toolbox mr-2"></i>
                                            {t('toolsNeeded')}
                                        </h3>
                                        <div className="tool-list">
                                            {selectedIssue.tools.map((tool, idx) => (
                                                <span key={idx} className="tool-item">
                                                    {tool}
                                                </span>
                                            ))}
                                        </div>
                                    </div>

                                    {/* Current Step */}
                                    <div className="card-body">
                                        <div className="mb-6">
                                            <h2 style={{fontSize: 'var(--text-2xl)', fontWeight: 'var(--font-bold)', marginBottom: 'var(--space-4)'}}>
                                                {t('step')} {currentStep + 1} {t('of')} {selectedIssue.steps.length}
                                            </h2>

                                            <div className="step-box">
                                                <div style={{fontSize: 'var(--text-6xl)', marginBottom: 'var(--space-4)'}}>
                                                    {selectedIssue.steps[currentStep].icon}
                                                </div>
                                                <p style={{fontSize: 'var(--text-xl)', fontWeight: 'var(--font-semibold)', marginBottom: 'var(--space-2)'}}>
                                                    {selectedIssue.steps[currentStep].action}
                                                </p>
                                                <p className="text-secondary">
                                                    <i className="fas fa-clock mr-2"></i>
                                                    {t('timeRequired')}: {selectedIssue.steps[currentStep].time}
                                                </p>
                                            </div>
                                        </div>

                                        {/* All Steps Overview */}
                                        <div className="mb-6">
                                            <h3 style={{fontWeight: 'var(--font-semibold)', marginBottom: 'var(--space-3)'}}>{t('allStepsOverview')}</h3>
                                            <div className="steps-timeline">
                                                {selectedIssue.steps.map((step, idx) => (
                                                    <div
                                                        key={idx}
                                                        className={`step-item ${
                                                            idx === currentStep
                                                                ? 'step-item-active'
                                                                : idx < currentStep
                                                                    ? 'step-item-completed'
                                                                    : 'step-item-pending'
                                                        }`}
                                                    >
                                                        <span style={{marginRight: 'var(--space-3)', fontSize: 'var(--text-2xl)'}}>{step.icon}</span>
                                                        <span className="flex-1" style={{fontWeight: idx === currentStep ? 'var(--font-semibold)' : 'normal'}}>
                                                            {step.step}. {step.action}
                                                        </span>
                                                        {idx < currentStep && (
                                                            <i className="fas fa-check-circle" style={{color: 'var(--color-success)'}}></i>
                                                        )}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        {/* Navigation */}
                                        <div className="flex gap-4">
                                            <button
                                                onClick={() => setCurrentStep(Math.max(0, currentStep - 1))}
                                                disabled={currentStep === 0}
                                                className={`btn flex-1 ${currentStep === 0 ? 'btn-secondary' : 'btn-secondary'}`}
                                                style={currentStep === 0 ? {opacity: 0.5, cursor: 'not-allowed'} : {}}
                                            >
                                                <i className="fas fa-arrow-left mr-2"></i>
                                                {t('prevStep')}
                                            </button>
                                            {currentStep < selectedIssue.steps.length - 1 ? (
                                                <button
                                                    onClick={() => setCurrentStep(currentStep + 1)}
                                                    className="btn btn-primary flex-1"
                                                >
                                                    {t('nextStep')}
                                                    <i className="fas fa-arrow-right ml-2"></i>
                                                </button>
                                            ) : (
                                                <button
                                                    onClick={completeRepair}
                                                    className="btn btn-success flex-1"
                                                >
                                                    <i className="fas fa-check mr-2"></i>
                                                    {t('completeRepair')}
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* History View */}
                        {currentView === 'history' && (
                            <div className="max-w-lg mx-auto">
                                <h2 className="page-title">{t('historyTitle')}</h2>

                                {repairHistory.length === 0 ? (
                                    <div className="empty-state card">
                                        <div className="empty-state-icon"><i className="fas fa-history"></i></div>
                                        <p className="empty-state-title">{t('noRepairsYet')}</p>
                                        <p className="empty-state-desc">{t('noRepairsHint')}</p>
                                    </div>
                                ) : (
                                    <>
                                        {/* Statistiky */}
                                        <div className="grid grid-3 gap-4 mb-6">
                                            <div className="card" style={{padding: 'var(--space-4)', textAlign: 'center'}}>
                                                <div style={{fontSize: 'var(--text-2xl)', fontWeight: 'var(--font-bold)', color: 'var(--color-primary)'}}>
                                                    {getHistoryStats().total}
                                                </div>
                                                <div className="text-muted" style={{fontSize: 'var(--text-sm)'}}>{t('totalRepairs')}</div>
                                            </div>
                                            <div className="card" style={{padding: 'var(--space-4)', textAlign: 'center'}}>
                                                <div style={{fontSize: 'var(--text-2xl)', fontWeight: 'var(--font-bold)', color: 'var(--color-success)'}}>
                                                    {getHistoryStats().completed}
                                                </div>
                                                <div className="text-muted" style={{fontSize: 'var(--text-sm)'}}>{t('completedRepairs')}</div>
                                            </div>
                                            <div className="card" style={{padding: 'var(--space-4)', textAlign: 'center'}}>
                                                <div style={{fontSize: 'var(--text-2xl)', fontWeight: 'var(--font-bold)', color: 'var(--color-warning)'}}>
                                                    {getHistoryStats().inProgress}
                                                </div>
                                                <div className="text-muted" style={{fontSize: 'var(--text-sm)'}}>{t('inProgress')}</div>
                                            </div>
                                        </div>

                                        {/* FiltrovÃ¡nÃ­ a export */}
                                        <div className="flex-between mb-4" style={{flexWrap: 'wrap', gap: 'var(--space-2)'}}>
                                            <div className="category-filter" style={{margin: 0}}>
                                                <button
                                                    onClick={() => setHistoryFilter('all')}
                                                    className={`category-btn ${historyFilter === 'all' ? 'active' : ''}`}
                                                >
                                                    {t('filterAll')} ({repairHistory.length})
                                                </button>
                                                <button
                                                    onClick={() => setHistoryFilter('completed')}
                                                    className={`category-btn ${historyFilter === 'completed' ? 'active' : ''}`}
                                                >
                                                    <i className="fas fa-check-circle mr-1"></i>
                                                    {t('filterCompleted')}
                                                </button>
                                                <button
                                                    onClick={() => setHistoryFilter('in_progress')}
                                                    className={`category-btn ${historyFilter === 'in_progress' ? 'active' : ''}`}
                                                >
                                                    <i className="fas fa-wrench mr-1"></i>
                                                    {t('filterInProgress')}
                                                </button>
                                            </div>
                                            <button
                                                onClick={exportToCSV}
                                                className="btn btn-secondary"
                                                style={{whiteSpace: 'nowrap'}}
                                            >
                                                <i className="fas fa-download mr-2"></i>
                                                {t('exportCSV')}
                                            </button>
                                        </div>

                                        {/* Seznam oprav */}
                                        <div style={{display: 'flex', flexDirection: 'column', gap: 'var(--space-4)'}}>
                                            {getFilteredHistory().length === 0 ? (
                                                <div className="text-center text-muted" style={{padding: 'var(--space-8)'}}>
                                                    <i className="fas fa-filter" style={{fontSize: 'var(--text-3xl)', marginBottom: 'var(--space-2)', display: 'block'}}></i>
                                                    {t('noCategoryItems')}
                                                </div>
                                            ) : (
                                                getFilteredHistory().map(item => (
                                                    <div
                                                        key={item.id}
                                                        className="card hover-scale"
                                                        style={{cursor: 'pointer'}}
                                                        onClick={() => setSelectedRepairDetail(item)}
                                                    >
                                                        <div className="card-body flex-between">
                                                            <div>
                                                                <h3 style={{fontWeight: 'var(--font-semibold)', fontSize: 'var(--text-lg)'}}>
                                                                    {item.object} - {item.issue}
                                                                </h3>
                                                                <p className="text-muted" style={{fontSize: 'var(--text-sm)', marginTop: 'var(--space-1)'}}>
                                                                    <i className="far fa-calendar mr-2"></i>
                                                                    {item.date}
                                                                    {item.timeEstimate && (
                                                                        <span style={{marginLeft: 'var(--space-3)'}}>
                                                                            <i className="fas fa-clock mr-1"></i>
                                                                            {item.timeEstimate}
                                                                        </span>
                                                                    )}
                                                                </p>
                                                            </div>
                                                            <div className="flex items-center gap-2">
                                                                {item.status === 'completed' ? (
                                                                    <span className="badge badge-success">
                                                                        <i className="fas fa-check-circle mr-1"></i>
                                                                        {t('completed')}
                                                                    </span>
                                                                ) : (
                                                                    <span className="badge badge-warning">
                                                                        <i className="fas fa-wrench mr-1"></i>
                                                                        {t('inProgress')}
                                                                    </span>
                                                                )}
                                                                <i className="fas fa-chevron-right text-muted"></i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                    </>
                                )}

                                {/* Detail opravy modal */}
                                {selectedRepairDetail && (
                                    <div className="translating-overlay" onClick={() => setSelectedRepairDetail(null)}>
                                        <div
                                            className="card"
                                            style={{
                                                maxWidth: '500px',
                                                width: '90%',
                                                maxHeight: '80vh',
                                                overflow: 'auto'
                                            }}
                                            onClick={e => e.stopPropagation()}
                                        >
                                            <div className="result-header">
                                                <div className="flex-between">
                                                    <div>
                                                        <h2 style={{fontSize: 'var(--text-xl)', fontWeight: 'var(--font-bold)'}}>
                                                            {selectedRepairDetail.object}
                                                        </h2>
                                                        <p style={{opacity: 0.9}}>{selectedRepairDetail.issue}</p>
                                                    </div>
                                                    <button
                                                        onClick={() => setSelectedRepairDetail(null)}
                                                        style={{
                                                            background: 'rgba(255,255,255,0.2)',
                                                            border: 'none',
                                                            borderRadius: '50%',
                                                            width: '36px',
                                                            height: '36px',
                                                            cursor: 'pointer',
                                                            color: 'white',
                                                            fontSize: 'var(--text-lg)'
                                                        }}
                                                    >
                                                        <i className="fas fa-times"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div className="card-body">
                                                <div className="grid grid-2 gap-4 mb-4">
                                                    <div>
                                                        <div className="text-muted" style={{fontSize: 'var(--text-sm)'}}>
                                                            <i className="far fa-calendar mr-2"></i>Datum
                                                        </div>
                                                        <div style={{fontWeight: 'var(--font-semibold)'}}>{selectedRepairDetail.date}</div>
                                                    </div>
                                                    <div>
                                                        <div className="text-muted" style={{fontSize: 'var(--text-sm)'}}>
                                                            <i className="fas fa-clock mr-2"></i>{t('repairTime')}
                                                        </div>
                                                        <div style={{fontWeight: 'var(--font-semibold)'}}>
                                                            {selectedRepairDetail.timeEstimate || 'N/A'}
                                                        </div>
                                                    </div>
                                                </div>

                                                <div className="mb-4">
                                                    <div className="text-muted" style={{fontSize: 'var(--text-sm)', marginBottom: 'var(--space-2)'}}>
                                                        Stav
                                                    </div>
                                                    {selectedRepairDetail.status === 'completed' ? (
                                                        <span className="badge badge-success">
                                                            <i className="fas fa-check-circle mr-1"></i>
                                                            {t('completed')}
                                                        </span>
                                                    ) : (
                                                        <span className="badge badge-warning">
                                                            <i className="fas fa-wrench mr-1"></i>
                                                            {t('inProgress')}
                                                        </span>
                                                    )}
                                                </div>

                                                {selectedRepairDetail.tools && selectedRepairDetail.tools.length > 0 && (
                                                    <div className="mb-4">
                                                        <div className="text-muted" style={{fontSize: 'var(--text-sm)', marginBottom: 'var(--space-2)'}}>
                                                            <i className="fas fa-toolbox mr-2"></i>{t('tools')}
                                                        </div>
                                                        <div className="tool-list">
                                                            {selectedRepairDetail.tools.map((tool, idx) => (
                                                                <span key={idx} className="tool-item">{tool}</span>
                                                            ))}
                                                        </div>
                                                    </div>
                                                )}

                                                {selectedRepairDetail.steps && selectedRepairDetail.steps.length > 0 && (
                                                    <div className="mb-4">
                                                        <div className="text-muted" style={{fontSize: 'var(--text-sm)', marginBottom: 'var(--space-2)'}}>
                                                            <i className="fas fa-list-ol mr-2"></i>{t('steps')}
                                                        </div>
                                                        <div style={{fontSize: 'var(--text-sm)'}}>
                                                            {selectedRepairDetail.steps.map((step, idx) => (
                                                                <div key={idx} style={{
                                                                    padding: 'var(--space-2)',
                                                                    borderBottom: idx < selectedRepairDetail.steps.length - 1 ? '1px solid var(--color-border)' : 'none'
                                                                }}>
                                                                    <span style={{marginRight: 'var(--space-2)'}}>{step.icon}</span>
                                                                    {step.action}
                                                                </div>
                                                            ))}
                                                        </div>
                                                    </div>
                                                )}

                                                <button
                                                    onClick={() => setSelectedRepairDetail(null)}
                                                    className="btn btn-primary btn-block"
                                                >
                                                    {t('close')}
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}

                        {/* Knowledge Base View */}
                        {currentView === 'knowledge' && (
                            <div className="max-w-2xl mx-auto">
                                <h2 className="page-title">{t('databaseTitle')}</h2>

                                {/* Category Filter */}
                                <div className="category-filter">
                                    {categories.map(cat => (
                                        <button
                                            key={cat.id}
                                            onClick={() => setSelectedCategory(cat.id)}
                                            className={`category-btn ${selectedCategory === cat.id ? 'active' : ''}`}
                                        >
                                            <span style={{marginRight: 'var(--space-1)'}}>{cat.icon}</span>
                                            {cat.name}
                                        </button>
                                    ))}
                                </div>

                                {/* Results count */}
                                <p className="text-center text-secondary mb-6" style={{fontSize: 'var(--text-sm)'}}>
                                    {t('showing')} {getFilteredDatabase().length} {t('outOf')} {Object.keys(repairDatabase).length} {t('items')}
                                </p>

                                <div className="grid grid-3 gap-6">
                                    {getFilteredDatabase().map(([key, item]) => (
                                        <div key={key} className="knowledge-card">
                                            <div className="knowledge-card-header">
                                                <div className="flex-between items-center">
                                                    <h3 style={{fontWeight: 'var(--font-bold)', fontSize: 'var(--text-lg)'}}>{item.name}</h3>
                                                    <span style={{fontSize: 'var(--text-2xl)'}}>{item.icon}</span>
                                                </div>
                                            </div>
                                            <div className="p-4">
                                                <div style={{display: 'flex', flexDirection: 'column', gap: 'var(--space-3)'}}>
                                                    {item.issues.map(issue => (
                                                        <div key={issue.id} className="issue-item">
                                                            <p style={{fontWeight: 'var(--font-semibold)'}}>{issue.name}</p>
                                                            <p style={{fontSize: 'var(--text-sm)', color: 'var(--color-text-secondary)'}}>{issue.description}</p>
                                                            <div style={{marginTop: 'var(--space-2)', display: 'flex', gap: 'var(--space-4)', fontSize: 'var(--text-xs)', color: 'var(--color-text-muted)'}}>
                                                                <span><i className="fas fa-clock mr-1"></i>{issue.timeEstimate}</span>
                                                                <span><i className="fas fa-signal mr-1"></i>{issue.difficulty}</span>
                                                                <span className={`badge badge-${issue.riskScore > 5 ? 'danger' : issue.riskScore > 2 ? 'warning' : 'success'}`} style={{fontSize: 'var(--text-xs)'}}>
                                                                    {t('risk')}: {issue.riskScore}/10
                                                                </span>
                                                            </div>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    ))}
                                </div>

                                {getFilteredDatabase().length === 0 && (
                                    <div className="empty-state card">
                                        <div className="empty-state-icon"><i className="fas fa-search"></i></div>
                                        <p className="empty-state-title">{t('noCategoryItems')}</p>
                                        <p className="empty-state-desc">{t('tryCategoryHint')}</p>
                                    </div>
                                )}

                                <div className="alert alert-info mt-8">
                                    <p className="alert-title">
                                        <i className="fas fa-info-circle mr-2"></i>
                                        {t('aboutDatabase')}
                                    </p>
                                    <p>
                                        {t('databaseInfo')}
                                    </p>
                                </div>
                            </div>
                        )}
                    </main>

                    {/* Footer */}
                    <footer className="footer">
                        <div className="container">
                            <div className="footer-grid">
                                <div>
                                    <h3 className="footer-title">{t('appName')}</h3>
                                    <p className="footer-text">
                                        {t('footerSlogan')}
                                    </p>
                                </div>
                                <div>
                                    <h3 className="footer-title">{t('footerFeatures')}</h3>
                                    <ul className="footer-links">
                                        <li>â€¢ {t('footerAI')}</li>
                                        <li>â€¢ {t('footer500guides')}</li>
                                        <li>â€¢ {t('footerSafety')}</li>
                                        <li>â€¢ {t('footerHistory')}</li>
                                    </ul>
                                </div>
                                <div>
                                    <h3 className="footer-title">{t('footerContact')}</h3>
                                    <p className="footer-text">
                                        support@fixo.app<br/>
                                        "{t('footerQuote')}"
                                    </p>
                                </div>
                            </div>
                            <div className="footer-bottom">
                                {t('footerCopyright')}
                            </div>
                        </div>
                    </footer>
                </div>
            );
        }

        // Render aplikace
        ReactDOM.render(<FixoApp />, document.getElementById('root'));
    </script>
</body>
</html>
