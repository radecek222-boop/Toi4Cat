<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="/FIXO/">
    <title>FIXO - Datab치ze oprav</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="public/icons/icon-72x72.png">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="assets/css/main.css">
    <style>
        .repair-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: var(--space-2);
            margin-bottom: var(--space-3);
        }

        .repair-card {
            background: var(--color-bg-primary);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-md);
            padding: var(--space-2);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .repair-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--color-primary);
        }

        .repair-card-icon {
            font-size: 2rem;
            margin-bottom: var(--space-1);
            text-align: center;
        }

        .repair-card-title {
            font-size: var(--font-size-sm);
            font-weight: 600;
            color: var(--color-text-primary);
            text-align: center;
            margin-bottom: var(--space-1);
        }

        .repair-card-info {
            font-size: var(--font-size-xs);
            color: var(--color-text-secondary);
            text-align: center;
        }

        .category-badge {
            display: inline-block;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-full);
            font-size: var(--font-size-xs);
            font-weight: 600;
            margin-top: var(--space-2);
        }

        .category-voda {
            background: #E0F2FE;
            color: #0369A1;
        }

        .category-elektrika {
            background: #FEF3C7;
            color: #92400E;
        }

        .category-topeni {
            background: #FEE2E2;
            color: #991B1B;
        }

        .category-dvere {
            background: #F3E8FF;
            color: #6B21A8;
        }
    </style>
</head>
<body>
    <!-- HEADER -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">
                    <i class="fas fa-tools"></i>
                    <span>FIXO</span>
                </a>

                <nav>
                    <a href="index.html">
                        <i class="fas fa-home"></i>
                        <span>Dom콢</span>
                    </a>
                    <a href="repair.html" class="active">
                        <i class="fas fa-wrench"></i>
                        <span>Datab치ze oprav</span>
                    </a>
                    <a href="partners.html">
                        <i class="fas fa-handshake"></i>
                        <span>Partne콏i</span>
                    </a>
                    <a href="about.html">
                        <i class="fas fa-info-circle"></i>
                        <span>O n치s</span>
                    </a>
                    <a href="contacts.html">
                        <i class="fas fa-envelope"></i>
                        <span>Kontakt</span>
                    </a>
                </nav>

                <button class="mobile-menu-toggle" id="mobileMenuToggle">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
            </div>

            <div class="mobile-nav" id="mobileNav">
                <a href="index.html">
                    <i class="fas fa-home"></i>
                    <span>Dom콢</span>
                </a>
                <a href="repair.html" class="active">
                    <i class="fas fa-wrench"></i>
                    <span>Datab치ze oprav</span>
                </a>
                <a href="partners.html">
                    <i class="fas fa-handshake"></i>
                    <span>Partne콏i</span>
                </a>
                <a href="about.html">
                    <i class="fas fa-info-circle"></i>
                    <span>O n치s</span>
                </a>
                <a href="contacts.html">
                    <i class="fas fa-envelope"></i>
                    <span>Kontakt</span>
                </a>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT -->
    <main>
        <div class="container" style="padding: var(--space-4) var(--space-4);">

            <!-- Header -->
            <div style="background: var(--color-bg-primary); border-radius: var(--radius-2xl); padding: var(--space-4); box-shadow: var(--shadow-xl); margin-bottom: var(--space-4);">
                <h1 style="font-size: var(--font-size-2xl); font-weight: 700; color: var(--color-primary); margin-bottom: var(--space-2);">
                    <i class="fas fa-wrench"></i> Datab치ze oprav
                </h1>
                <p style="color: var(--color-text-secondary); font-size: var(--font-size-sm);">
                    Proch치zejte na코i rozs치hlou datab치zi oprav dom치c칤ch z치vad. Ka쬯칳 n치vod obsahuje krok-za-krokem instrukce, odhad 캜asu a n치klad콢.
                </p>
            </div>

            <!-- Repair Grid -->
            <div id="repairGrid" class="repair-grid">
                <!-- Na캜te se pomoc칤 JS -->
                <div style="grid-column: 1 / -1; text-center; padding: var(--space-8);">
                    <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: var(--color-primary);"></i>
                    <p style="margin-top: var(--space-2); color: var(--color-text-secondary);">Na캜칤t치m datab치zi...</p>
                </div>
            </div>

        </div>
    </main>

    <!-- FOOTER -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>FIXO</h3>
                    <p>AI asistent pro okam쬴t칠 opravy dom치c칤ch z치vad. U코et콏ete 캜as i pen칤ze s profesion치ln칤mi n치vody.</p>
                </div>
                <div class="footer-section">
                    <h3>Pr치vn칤 informace</h3>
                    <ul class="footer-links">
                        <li><a href="contacts.html#gdpr"><i class="fas fa-shield-alt"></i> Ochrana osobn칤ch 칰daj콢</a></li>
                        <li><a href="contacts.html#terms"><i class="fas fa-file-contract"></i> Obchodn칤 podm칤nky</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 FIXO. V코echna pr치va vyhrazena.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="assets/js/api.js"></script>
    <script>
        // Mobile menu toggle
        document.getElementById('mobileMenuToggle').addEventListener('click', function() {
            this.classList.toggle('active');
            document.getElementById('mobileNav').classList.toggle('active');
        });

        // Na캜칤st datab치zi oprav
        async function loadRepairs() {
            try {
                const response = await fetch('data/repairs.json');
                const data = await response.json();

                displayRepairs(data.repairs);
            } catch (error) {
                console.error('Chyba p콏i na캜칤t치n칤 datab치ze:', error);
                document.getElementById('repairGrid').innerHTML = `
                    <div style="grid-column: 1 / -1; text-center; padding: var(--space-8);">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; color: var(--color-danger);"></i>
                        <p style="margin-top: var(--space-2); color: var(--color-danger);">Chyba p콏i na캜칤t치n칤 datab치ze</p>
                    </div>
                `;
            }
        }

        // Zobrazit opravy
        function displayRepairs(repairs) {
            const grid = document.getElementById('repairGrid');
            grid.innerHTML = '';

            Object.entries(repairs).forEach(([key, repair]) => {
                const card = document.createElement('div');
                card.className = 'repair-card';
                card.onclick = () => showRepairDetail(key, repair);

                const issuesCount = repair.issues ? repair.issues.length : 0;

                card.innerHTML = `
                    <div class="repair-card-icon">${repair.icon || '游댢'}</div>
                    <div class="repair-card-title">${repair.name}</div>
                    <div class="repair-card-info">${issuesCount} ${issuesCount === 1 ? 'probl칠m' : issuesCount < 5 ? 'probl칠my' : 'probl칠m콢'}</div>
                    <div style="text-align: center;">
                        <span class="category-badge category-${repair.category || 'voda'}">${repair.category || 'Voda'}</span>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        // Detail opravy
        function showRepairDetail(key, repair) {
            FIXO_API.showNotification(`Detail pro "${repair.name}" p콏ipravujeme...`, 'info');
            // TODO: Implementovat modal s detailem opravy
        }

        // Na캜칤st p콏i startu
        loadRepairs();
    </script>
</body>
</html>
